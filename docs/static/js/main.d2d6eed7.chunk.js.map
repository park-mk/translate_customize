{"version":3,"sources":["components/GlobalStyle.js","i18n/index.js","utils/index.js","subtitle/sub.js","subtitle/index.js","components/Upload.js","components/Help.js","components/Donate.js","components/Dialog.js","components/Header.js","components/Player.js","components/Tool.js","components/Subtitle.js","components/Main.js","waveform/emitter.js","waveform/events.js","waveform/utils.js","waveform/template.js","waveform/drawer.js","waveform/decoder.js","waveform/loader.js","waveform/controller.js","waveform/index.js","components/Block.js","components/Metronome.js","components/Footer.js","utils/storage.js","translate/index.js","components/App.js","serviceWorker.js","index.js"],"names":["createGlobalStyle","zh","open","save","undo","clear","help","donate","confirm","delete","insert","merge","en","getExt","url","includes","split","trim","toLowerCase","pop","sleep","ms","Promise","resolve","setTimeout","secondToTime","seconds","DT","d2t","toFixed","timeToSecond","time","t2d","notify","text","type","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","getKeyCode","event","tag","document","activeElement","tagName","toUpperCase","editable","getAttribute","Number","keyCode","Sub","start","end","text2","this","startTime","endTime","clamp","Infinity","checkIsFile","source","File","getType","name","getVtt","a","getVttFromFile","getVttFromUrl","vttToUrl","vtt","URL","createObjectURL","Blob","file","reader","FileReader","onload","result","replace","assToVtt","srtToVtt","readAsText","fetch","response","ass","re_ass","RegExp","fixTime","map","item","index","arr","length","join","line","m","match","filter","srt","concat","getSubFromVttUrl","$video","createElement","$track","default","kind","appendChild","Array","from","track","cues","src","Upload","styled","div","player","options","setOption","updateSubtitles","openSubtitle","NProgress","set","vttText","subtitleUrl","subtitle","switch","uploadDialog","t","message","done","openVideo","videoUrl","canPlayType","className","value","disabled","spellCheck","onChange","target","files","Help","href","Donate","style","display","justifyContent","width","alt","Dialog","props","useState","activeName","setActiveName","useEffect","onClick","onClose","stopPropagation","title","children","Header","Left","Right","Logo","Menu","elink","download","body","click","removeChild","downloadFile","subtitles","Date","now","undoSubtitles","window","cleanSubtitles","helpDialog","donateDialog","Player","React","memo","setPlayer","setCurrentTime","height","option","loop","autoSize","aspectRatio","playbackRate","fullscreen","fullscreenWeb","miniProgressBar","moreVideoAttr","crossOrigin","preload","muted","autoplay","getInstance","art","requestAnimationFrame","playing","currentTime","on","Tool","language","translateSubtitles","timeOffsetSubtitles","Subtitle","currentIndex","refe_subtitles","addSubtitle","updateSubtitle","checkSubtitle","removeSubtitle","translateSubtitle","isDroging","lastPageX","lastSub","lastKey","lastValue","onMouseDown","sub","key","pageX","onMouseMove","onMouseUp","setWidth","setHeight","resize","useCallback","clientWidth","clientHeight","init","debounceResize","debounce","addEventListener","headerHeight","rowHeight","scrollToIndex","rowCount","rowGetter","headerRowRenderer","rowRenderer","rowData","pause","duration","seek","marginBottom","flex","maxLength","unescape","Main","Emitter","fn","ctx","e","push","self","listener","off","args","apply","_","evtArr","slice","data","i","callback","evts","liveEvents","len","Events","destroyEvents","proxy","bind","isArray","forEach","removeEventListener","WFPlayerError","Error","errorHandle","condition","msg","durationToTime","num","b","Math","max","min","Template","wf","canvas","update","container","pixelRatio","constructor","instances","every","innerHTML","toDataURL","Drawer","template","getContext","gridNum","gridGap","beginTime","cursor","grid","ruler","wave","padding","floor","emit","drawBackground","drawGrid","drawRuler","drawWave","drawCursor","backgroundColor","paddingColor","clearRect","fillStyle","fillRect","progress","waveColor","progressColor","waveScale","decoder","channelData","sampleRate","audiobuffer","middle","waveWidth","startIndex","endIndex","step","cursorX","stepIndex","xIndex","waveX","gridColor","rulerColor","rulerAtTop","font","second","fillText","fontHeight","cursorColor","Decoder","audioCtx","AudioContext","webkitAudioContext","throttleDecodeAudioData","throttle","decodeAudioData","createBuffer","Float32Array","uint8","channel","buffer","getChannelData","error","console","warn","Loader","fileSize","loadSize","Uint8Array","abortController","destroy","AbortController","withCredentials","cors","headers","credentials","mode","signal","then","getReader","get","read","byteLength","buffers","Cons","reduce","pre","val","mergeBuffer","call","arrayBuffer","cancel","abort","Controller","playTimer","clickInit","resizeInit","playInit","left","offsetLeft","events","mediaElement","getTimeFromEvent","drawer","throttleResize","isDestroy","cancelAnimationFrame","id","WFPlayer","_currentTime","setOptions","controller","loader","devicePixelRatio","checkNum","isInteger","validator","kindOf","querySelector","scheme","HTMLVideoElement","HTMLAudioElement","load","changeChannel","exportImage","splice","indexOf","paused","ended","readyState","Block","magnetically","closeTime","lastTarget","lastType","lastX","lastIndex","lastWidth","lastDiffX","subs","render","hasSubtitle","mergeSubtitle","contextMenu","setContextMenu","contextMenuX","setContextMenuX","contextMenuY","setContextMenuY","$blockRef","createRef","$contextMenuRef","$subsRef","currentSubs","findIndex","onDocumentClick","composedPath","current","parseFloat","onDocumentMouseMove","transform","onDocumentMouseUp","timeDiff","previou","next","onKeyDown","ref","onContextMenu","preventDefault","subsTop","getBoundingClientRect","top","$contextMenu","pageY","right","visibility","prevProps","nextProps","isEqual","Storage","setDecodeing","setFileSize","setChannelNum","setRender","$waveform","WF","numberOfChannels","storage","JSON","parse","localStorage","getItem","Object","assign","setItem","stringify","removeItem","googleTranslate","query","lang","searchParams","append","json","catch","translate","limit","pLimit","all","history","inTranslation","worker","Worker","defaultLang","navigator","setLanguage","setCurrentIndex","setSubtitles","refe_setSubtitles","translationLanguage","updateLang","setLocale","saveToHistory","shift","clone","postMessage","initSubtitles","log","storageSubs","onmessage","useMemo","copySubtitles","previous","check","removeSubtitles","Fragment","GlobalStyle","Boolean","location","hostname","setTranslations","i18n","configure","minimum","showSpinner","ReactDOM","test","userAgent","App","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d2d6eed7.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components';\n\nexport default createGlobalStyle`\n    html,\n    body,\n    #root {\n        height: 100%;\n    }\n\n    body {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;\n        line-height: 1.5;\n        overflow: hidden;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        color: #ccc;\n        background: #1c1f2f;\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n`;\n","const en = {\n    open: 'Open',\n    save: 'Save',\n    undo: 'Undo',\n    clear: 'Clear',\n    help: 'Help',\n    donate: 'Donate',\n    confirm: 'Confirm',\n    delete: 'Delete',\n    insert: 'Insert Next',\n    merge: 'Merge Next',\n\n    'open-subtitle': 'Open Subtitle',\n    'open-subtitle-supports': 'Supports opening .vtt, .srt and .ass subtitle',\n    'open-subtitle-success': 'Open subtitles successfully',\n    'open-subtitle-error': 'Failed to open subtitles',\n\n    'open-video': 'Open Video',\n    'open-video-supports': 'Supports opening .mp4, .webm and .ogg video',\n    'open-video-warning':\n        'The files are opened locally and no data is uploaded. When creating an audio waveform, The browser may be blocked for a short time due to audio decoding',\n    'open-video-success': 'Open video successfully',\n    'open-video-error': 'Failed to open video',\n\n    'clear-warning': 'This step cannot be rolled back. Are you sure ?',\n    'clear-success': 'Clear all subtitles data successfully',\n\n    'help-info':\n        'This editor is suitable for video with small volume and simple subtitle effect. For large file videos or more subtitle effect, please use professional desktop software.',\n    'help-issue': 'You can ask any questions on Github Issue:',\n    'help-email': 'Or contact me via email:',\n\n    'donate-info':\n        'Or you can buy me a cup of coffee to encourage me to continue to update and improve the subtitle editor.',\n    'donate-weChatPay': 'WeChat Pay:',\n    'donate-alipay': 'Alipay:',\n\n    'history-rollback': 'History rollback successful',\n    'history-empty': 'History is empty',\n\n    'translation-success': 'Translation successful',\n    'translation-progress': 'Translation in progress',\n    'translation-limit': 'Limit 1000 translations per batch',\n\n    'audio-waveform': 'Audio Waveform:',\n    'file-size': 'File Size:',\n    'decoding-progress': 'Decoding Progress:',\n    'render-channel': 'Render Channel:',\n    'unit-duration': 'Unit Duration:',\n    'height-zoom': 'Height Zoom:',\n    'space-metronome': 'Space Metronome:',\n    'export-image': 'Export Image',\n    'parameter-error': 'Parameter error',\n    'keep-one': 'Please keep at least one subtitle',\n    'subtitle-text': '[Subtitle Text]',\n    'time-offset': 'Time Offset:',\n    'google-translate': 'Google Translate:',\n};\n\nconst zh = {\n    open: '打开',\n    save: '保存',\n    undo: '回退',\n    clear: '清除',\n    help: '帮助',\n    donate: '捐助',\n    confirm: '确定',\n\n    delete: '删除',\n    insert: '插入下一条',\n    merge: '合并下一条',\n\n    'open-subtitle': '打开字幕',\n    'open-subtitle-supports': '支持打开 .vtt, .srt 和 .ass 字幕',\n    'open-subtitle-success': '打开字幕成功',\n    'open-subtitle-error': '打开字幕失败',\n\n    'open-video': '打开视频',\n    'open-video-supports': '支持打开 .mp4, .webm 和 .ogg 视频',\n    'open-video-warning':\n        '文件均为本地打开，不会上传任何数据。创建音频波形时，浏览器可能会由于音频解码而在短时间内被阻塞',\n    'open-video-success': '打开视频成功',\n    'open-video-error': '打开视频失败',\n\n    'clear-warning': '此步骤无法回退，确定吗?',\n    'clear-success': '清除所有字幕数据成功',\n\n    'help-info': '该编辑器适用于体积小，字幕效果简单的视频。对于大文件视频或更多字幕效果，请使用专业的桌面软件。',\n    'help-issue': '您可以在Github问题上提出任何问题:',\n    'help-email': '或通过电子邮件与我联系:',\n\n    'donate-info': '或者，您可以给我买杯咖啡，以鼓励我继续更新和改进字幕编辑器。',\n    'donate-weChatPay': '微信支付:',\n    'donate-alipay': '支付宝:',\n\n    'history-rollback': '历史回退成功',\n    'history-empty': '历史是空的',\n\n    'translation-success': '翻译成功',\n    'translation-progress': '翻译正在进行',\n    'translation-limit': '每此限制1000条翻译',\n\n    'audio-waveform': '波形图:',\n    'file-size': '文件大小:',\n    'decoding-progress': '解码进度:',\n    'render-channel': '渲染声道:',\n    'unit-duration': '单位时长:',\n    'height-zoom': '高度缩放:',\n    'space-metronome': '空格节拍器:',\n    'export-image': '导出图像',\n    'parameter-error': '参数错误',\n    'keep-one': '请至少保留一个字幕',\n    'subtitle-text': '[字幕文字]',\n    'time-offset': '时间偏移:',\n    'google-translate': '谷歌翻译:',\n};\n\nexport default {\n    en,\n    zh,\n    'zh-cn': zh,\n    'zh-tw': zh,\n};\n\nexport const names = {\n    en: 'EN',\n    zh: '中',\n};\n\nexport const getName = key => {\n    return (\n        {\n            en: 'en',\n            zh: 'zh',\n            'zh-cn': 'zh',\n            'zh-tw': 'zh',\n        }[key] || 'en'\n    );\n};\n","import DT from 'duration-time-conversion';\nimport { toast } from 'react-toastify';\n\nexport function isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent);\n}\n\nexport function getExt(url) {\n    if (url.includes('?')) {\n        return getExt(url.split('?')[0]);\n    }\n\n    if (url.includes('#')) {\n        return getExt(url.split('#')[0]);\n    }\n\n    return url\n        .trim()\n        .toLowerCase()\n        .split('.')\n        .pop();\n}\n\nexport function sleep(ms = 0) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function secondToTime(seconds = 0) {\n    return DT.d2t(seconds.toFixed(3));\n}\n\nexport function timeToSecond(time) {\n    return DT.t2d(time);\n}\n\nexport function downloadFile(url, name) {\n    const elink = document.createElement('a');\n    elink.style.display = 'none';\n    elink.href = url;\n    elink.download = name;\n    document.body.appendChild(elink);\n    elink.click();\n    document.body.removeChild(elink);\n}\n\nexport function notify(text = '', type = 'info') {\n    // info success warning error default\n    return (\n        text.trim() &&\n        toast[type](text, {\n            position: 'top-center',\n            autoClose: 2000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n        })\n    );\n}\n\nexport function getKeyCode(event) {\n    const tag = document.activeElement.tagName.toUpperCase();\n    const editable = document.activeElement.getAttribute('contenteditable');\n    if (tag !== 'INPUT' && tag !== 'TEXTAREA' && editable !== '' && editable !== 'true') {\n        return Number(event.keyCode);\n    }\n}\n","import clamp from 'lodash/clamp';\nimport { timeToSecond, secondToTime } from '../utils';\n\nexport default class Sub {\n    constructor(start, end, text,text2) {\n        this.start = start;\n        this.end = end;\n        this.text = text;\n        this.text2=text2;\n\n    }\n\n    get check() {\n        return this.startTime >= 0 && this.endTime >= 0 && this.startTime < this.endTime;\n    }\n\n    get clone() {\n        return new Sub(this.start, this.end, this.text,this.text2);\n    }\n\n    get startTime() {\n        return timeToSecond(this.start);\n    }\n\n    set startTime(time) {\n        this.start = secondToTime(clamp(time, 0, Infinity));\n    }\n\n    get endTime() {\n        return timeToSecond(this.end);\n    }\n\n    set endTime(time) {\n        this.end = secondToTime(clamp(time, 0, Infinity));\n    }\n\n    get duration() {\n        return (this.endTime - this.startTime).toFixed(3);\n    }\n}\n","import { getExt, secondToTime } from '../utils';\nimport Sub from './sub';\n\nexport function checkIsFile(source) {\n    return source instanceof File;\n}\n\nexport function getType(source) {\n    return checkIsFile(source) ? getExt(source.name) : getExt(source);\n}\n\nexport async function getVtt(source) {\n    if (checkIsFile(source)) {\n        return await getVttFromFile(source);\n    } else {\n        return await getVttFromUrl(source);\n    }\n}\n\nexport function vttToUrl(vtt) {\n    return URL.createObjectURL(\n        new Blob([vtt], {\n            type: 'text/vtt',\n        }),\n    );\n}\n\nexport function vttToUrlUseWorker() {\n    return URL.createObjectURL(\n        new Blob([\n            `onmessage = event => {\n                postMessage(URL.createObjectURL(\n                    new Blob([\n                        \\`WEBVTT\n\n                        \\${event.data.map((item, index) => \\`\n                        \\${index + 1}\n                        \\${item.start} --> \\${item.end}\n                        \\${item.text}\\`).join('\\\\n\\\\n')}\n                        \\`\n                    ], {\n                        type: 'text/vtt',\n                    }),\n                ))\n            }`,\n        ]),\n    );\n}\n\nexport function subToVtt(sub) {\n    return (\n        'WEBVTT\\n\\n' +\n        sub\n            .map((item, index) => {\n                return index + 1 + '\\n' + item.start + ' --> ' + item.end + '\\n' + item.text2;\n            })\n            .join('\\n\\n')\n    );\n}\n\nexport async function getVttFromFile(file) {\n    return new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onload = () => {\n            switch (getType(file)) {\n                case 'vtt':\n                    resolve(reader.result.replace(/{[\\s\\S]*?}/g, ''));\n                    break;\n                case 'ass':\n                    resolve(assToVtt(reader.result));\n                    break;\n                case 'srt':\n                    resolve(srtToVtt(reader.result));\n                    break;\n                default:\n                    resolve();\n                    break;\n            }\n        };\n        reader.readAsText(file);\n    });\n}\n\nexport async function getVttFromUrl(url) {\n    return new Promise(async resolve => {\n        const response = await fetch(url);\n        const result = await response.text();\n        switch (getType(url)) {\n            case 'vtt':\n                resolve(result.replace(/{[\\s\\S]*?}/g, ''));\n                break;\n            case 'ass':\n                resolve(assToVtt(result));\n                break;\n            case 'srt':\n                resolve(srtToVtt(result));\n                break;\n            default:\n                resolve();\n                break;\n        }\n    });\n}\n\nexport function assToVtt(ass) {\n    const re_ass = new RegExp(\n        'Dialogue:\\\\s\\\\d,' +\n            '(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),' +\n            '(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),' +\n            '([^,]*),' +\n            '([^,]*),' +\n            '(?:[^,]*,){4}' +\n            '([\\\\s\\\\S]*)$',\n        'i',\n    );\n\n    function fixTime(time = '') {\n        return time\n            .split(/[:.]/)\n            .map((item, index, arr) => {\n                if (index === arr.length - 1) {\n                    if (item.length === 1) {\n                        return '.' + item + '00';\n                    } else if (item.length === 2) {\n                        return '.' + item + '0';\n                    }\n                } else {\n                    if (item.length === 1) {\n                        return (index === 0 ? '0' : ':0') + item;\n                    }\n                }\n\n                return index === 0 ? item : index === arr.length - 1 ? '.' + item : ':' + item;\n            })\n            .join('');\n    }\n\n    return (\n        'WEBVTT\\n\\n' +\n        ass\n            .split(/\\r?\\n/)\n            .map(line => {\n                const m = line.match(re_ass);\n                if (!m) return null;\n                return {\n                    start: fixTime(m[1].trim()),\n                    end: fixTime(m[2].trim()),\n                    text: m[5]\n                        .replace(/{[\\s\\S]*?}/g, '')\n                        .replace(/(\\\\N)/g, '\\n')\n                        .trim()\n                        .split(/\\r?\\n/)\n                        .map(item => item.trim())\n                        .join('\\n'),\n                    text2: m[5]\n                        .replace(/{[\\s\\S]*?}/g, '')\n                        .replace(/(\\\\N)/g, '\\n')\n                        .trim()\n                        .split(/\\r?\\n/)\n                        .map(item => item.trim())\n                        .join('\\n'),\n\n                };\n            })\n            .filter(line => line)\n            .map((line, index) => {\n                if (line) {\n                    return index + 1 + '\\n' + line.start + ' --> ' + line.end + '\\n' + line.text;\n                } else {\n                    return '';\n                }\n            })\n            .filter(line => line.trim())\n            .join('\\n\\n')\n    );\n}\n\nexport function srtToVtt(srt) {\n    return 'WEBVTT \\r\\n\\r\\n'.concat(\n        srt\n            .replace(/\\{\\\\([ibu])\\}/g, '</$1>')\n            .replace(/\\{\\\\([ibu])1\\}/g, '<$1>')\n            .replace(/\\{([ibu])\\}/g, '<$1>')\n            .replace(/\\{\\/([ibu])\\}/g, '</$1>')\n            .replace(/(\\d\\d:\\d\\d:\\d\\d),(\\d\\d\\d)/g, '$1.$2')\n            .replace(/{[\\s\\S]*?}/g, '')\n            .concat('\\r\\n\\r\\n'),\n    );\n}\n\nexport async function getSubFromVttUrl(url) {\n    return new Promise(resolve => {\n        const $video = document.createElement('video');\n        const $track = document.createElement('track');\n        $track.default = true;\n        $track.kind = 'metadata';\n        $video.appendChild($track);\n        $track.onload = () => {\n            resolve(\n                Array.from($track.track.cues).map(item => {\n                    const start = secondToTime(item.startTime);\n                    const end = secondToTime(item.endTime);\n                    const text = item.text;\n                    const text2= item.text2;\n                    return new Sub(start, end, text,text2);\n                }),\n            );\n        };\n        $track.src = url;\n    });\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport NProgress from 'nprogress';\nimport { notify } from '../utils';\nimport { getVtt, vttToUrl, getSubFromVttUrl } from '../subtitle';\nimport { t, Translate } from 'react-i18nify';\n\nconst Upload = styled.div`\n    .item {\n        margin-bottom: 20px;\n        .title {\n            color: #fff;\n            font-size: 14px;\n            padding: 5px 10px;\n            margin-bottom: 10px;\n            border-left: 2px solid #03a9f4;\n        }\n        .centent {\n            padding: 0 10px;\n            .upload {\n                position: relative;\n                margin-bottom: 10px;\n                .input {\n                    width: 100%;\n                    height: 30px;\n                    line-height: 30px;\n                    padding: 0 10px;\n                    outline: none;\n                    border: none;\n                    color: #fff;\n                    background-color: #363952;\n                }\n                .file {\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    bottom: 0;\n                    line-height: 1;\n                    height: 100%;\n                    width: 100px;\n                    color: #fff;\n                    background-color: #2196f3;\n\n                    input {\n                        position: absolute;\n                        left: 0;\n                        top: 0;\n                        right: 0;\n                        bottom: 0;\n                        width: 100%;\n                        height: 100%;\n                        opacity: 0;\n                    }\n                }\n            }\n            .info {\n                font-size: 12px;\n                color: rgba(255, 255, 255, 0.5);\n                margin-bottom: 10px;\n            }\n            .warning {\n                font-size: 12px;\n                padding: 5px;\n                color: #fff;\n                background-color: rgba(199, 81, 35, 0.5);\n                border: 1px solid rgba(199, 81, 35, 1);\n            }\n        }\n    }\n`;\n\nexport default function({ player, options, setOption, updateSubtitles }) {\n    async function openSubtitle(file) {\n        if (file) {\n            NProgress.start().set(0.5);\n            try {\n                const vttText = await getVtt(file);\n                if (vttText) {\n                    const subtitleUrl = vttToUrl(vttText);\n                    updateSubtitles(await getSubFromVttUrl(subtitleUrl));\n                    player.subtitle.switch(subtitleUrl);\n                    setOption({ subtitleUrl, uploadDialog: false });\n                    notify(t('open-subtitle-success'));\n                } else {\n                    notify(t('open-subtitle-error'), 'error');\n                }\n            } catch (error) {\n                notify(error.message, 'error');\n            }\n            NProgress.done();\n        }\n    }\n\n    function openVideo(file) {\n        if (file) {\n            NProgress.start().set(0.5);\n            if (typeof file === 'string') {\n                player.url = file;\n                setOption({ videoUrl: file, uploadDialog: false });\n                notify(t('open-video-success'));\n            } else {\n                const $video = document.createElement('video');\n                const canPlayType = $video.canPlayType(file.type);\n                if (canPlayType === 'maybe' || canPlayType === 'probably') {\n                    const videoUrl = URL.createObjectURL(file);\n                    player.url = videoUrl;\n                    setOption({ videoUrl: videoUrl, uploadDialog: false });\n                    notify(t('open-video-success'));\n                } else {\n                    notify(t('open-video-error'), 'error');\n                }\n            }\n            NProgress.done();\n        }\n    }\n\n    return (\n        <Upload>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <Translate value=\"open-subtitle\" />\n                </div>\n                <div className=\"centent\">\n                    <div className=\"upload\">\n                        <input\n                            disabled\n                            value={options.subtitleUrl}\n                            type=\"text\"\n                            className=\"input\"\n                            spellCheck=\"false\"\n                            onChange={event => openSubtitle(event.target.value)}\n                        />\n                        <div className=\"file\">\n                            <Translate value=\"open\" />\n                            <input type=\"file\" onChange={event => openSubtitle(event.target.files[0])} />\n                        </div>\n                    </div>\n                    <div className=\"info\">\n                        <Translate value=\"open-subtitle-supports\" />\n                    </div>\n                </div>\n            </div>\n            <div className=\"item\">\n                <div className=\"title\">\n                    <Translate value=\"open-video\" />\n                </div>\n                <div className=\"centent\">\n                    <div className=\"upload\">\n                        <input\n                            disabled\n                            value={options.videoUrl}\n                            type=\"text\"\n                            className=\"input\"\n                            spellCheck=\"false\"\n                            onChange={event => openVideo(event.target.value)}\n                        />\n                        <div className=\"file\">\n                            <Translate value=\"open\" />\n                            <input type=\"file\" onChange={event => openVideo(event.target.files[0])} />\n                        </div>\n                    </div>\n                    <div className=\"info\">\n                        <Translate value=\"open-video-supports\" />\n                    </div>\n                    <div className=\"warning\">\n                        <Translate value=\"open-video-warning\" />\n                    </div>\n                </div>\n            </div>\n        </Upload>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Translate } from 'react-i18nify';\n\nconst Help = styled.div`\n    position: relative;\n    padding: 0 20px 20px;\n    font-size: 14px;\n\n    a {\n        color: #2196f3;\n    }\n`;\n\nexport default function() {\n    return (\n        <Help>\n            <p>\n                <Translate value=\"help-info\" />\n            </p>\n            <p>\n                <Translate value=\"help-issue\" />\n            </p>\n            <p>\n                <a href=\"https://github.com/zhw2590582/SubPlayer/issues\">\n                    https://github.com/zhw2590582/SubPlayer/issues\n                </a>\n            </p>\n            <p>\n                <Translate value=\"help-email\" />\n            </p>\n            <p>\n                <a href=\"mailto:laozhaochaguan@gmail.com\">laozhaochaguan@gmail.com</a>\n            </p>\n        </Help>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Translate } from 'react-i18nify';\n\nconst Donate = styled.div`\n    position: relative;\n    padding: 0 20px 20px;\n    font-size: 14px;\n\n    a {\n        color: #2196f3;\n    }\n`;\n\nexport default function() {\n    return (\n        <Donate>\n            <p>\n                <Translate value=\"donate-info\" />\n            </p>\n            <p>Paypal:</p>\n            <p>\n                <a href=\"https://www.paypal.me/harveyzack\">https://www.paypal.me/harveyzack</a>\n            </p>\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                <div>\n                    <p>\n                        <Translate value=\"donate-weChatPay\" />\n                    </p>\n                    <p>\n                        <img style={{ width: 210 }} src=\"/wechatpay.jpg\" alt=\"WeChat Pay\" />\n                    </p>\n                </div>\n                <div>\n                    <p>\n                        <Translate value=\"donate-alipay\" />\n                    </p>\n                    <p>\n                        <img style={{ width: 210 }} src=\"/alipay.jpg\" alt=\"Alipay\" />\n                    </p>\n                </div>\n            </div>\n        </Donate>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\n\nconst Dialog = styled.div`\n    position: fixed;\n    z-index: 99;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: rgba(0, 0, 0, 0.8);\n\n    .dialog-inner {\n        min-height: 200px;\n        background-color: #1f2133;\n        border-radius: 3px;\n        overflow: hidden;\n        opacity: 0;\n        margin-top: -10px;\n        transition: all 0.2s ease 0s;\n        box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.5);\n\n        .dialog-title {\n            position: relative;\n            border-bottom: 1px solid #000;\n            background-color: #2a2c3c;\n            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n            color: #fff;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 10px 0;\n            margin-bottom: 10px;\n            font-size: 16px;\n        }\n\n        .dialog-cancel {\n            position: absolute;\n            right: 10px;\n            top: 10px;\n            cursor: pointer;\n            opacity: 0.5;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n\n        &.dialog-active {\n            opacity: 1;\n            margin-top: 0;\n        }\n    }\n`;\n\nexport default function(props) {\n    const [activeName, setActiveName] = useState('');\n\n    useEffect(() => {\n        setTimeout(() => setActiveName('dialog-active'), 100);\n    }, []);\n\n    return (\n        <Dialog onClick={() => props.onClose()}>\n            <div\n                style={{ width: props.width || 500 }}\n                className={`dialog-inner ${activeName}`}\n                onClick={event => event.stopPropagation()}\n            >\n                <div className=\"dialog-title\">\n                    {props.title || 'Title'}{' '}\n                    <i className=\"dialog-cancel icon-cancel\" onClick={() => props.onClose()}></i>\n                </div>\n                <div className=\"dialog-content\">{props.children}</div>\n            </div>\n        </Dialog>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { names, getName } from '../i18n';\nimport Upload from './Upload';\nimport Help from './Help';\nimport Donate from './Donate';\nimport Dialog from './Dialog';\nimport { downloadFile } from '../utils';\nimport { vttToUrl, subToVtt } from '../subtitle';\nimport { t, Translate } from 'react-i18nify';\n\nconst Header = styled.div`\n    position: relative;\n    display: flex;\n    height: 50px;\n    align-items: center;\n    justify-content: space-between;\n    background-color: #1f2133;\n    border-bottom: 1px solid rgb(0, 0, 0);\n`;\n\nconst Left = styled.div`\n    display: flex;\n    align-items: center;\n    height: 100%;\n`;\n\nconst Right = styled.div`\n    display: flex;\n    align-items: center;\n    height: 100%;\n`;\n\nconst Logo = styled.a`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 22px;\n    height: 100%;\n    cursor: pointer;\n    padding: 0 15px;\n    color: rgba(255, 255, 255, 1);\n    transition: all 0.2s ease 0s;\n    border-right: 1px solid rgb(0, 0, 0);\n    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    text-decoration: none;\n\n    &:hover {\n        background-color: #2196f3;\n    }\n`;\n\nconst Menu = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 13px;\n    height: 100%;\n    cursor: pointer;\n    padding: 0 25px;\n    color: rgba(255, 255, 255, 1);\n    transition: all 0.2s ease 0s;\n    border-right: 1px solid rgb(0, 0, 0);\n    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n\n    &:hover {\n        background-color: #2196f3;\n    }\n\n    i {\n        margin-right: 5px;\n    }\n`;\n\nconst I18n = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 13px;\n    height: 100%;\n    padding: 0 10px;\n    color: rgba(255, 255, 255, 1);\n    border-left: 1px solid rgb(0, 0, 0);\n    background-color: rgb(26, 83, 109);\n\n    i {\n        margin-right: 5px;\n    }\n\n    select {\n        outline: none;\n    }\n`;\n\nexport default function(props) {\n    return (\n        <Header>\n            <Left>\n                <Logo href=\"/\">\n                    <i className=\"icon-cc\"></i>\n                </Logo>\n                <Menu onClick={() => props.setOption({ uploadDialog: true })}>\n                    <i className=\"icon-upload\"></i>\n                    <Translate value=\"open\" />\n                </Menu>\n                <Menu onClick={() => downloadFile(vttToUrl(subToVtt(props.subtitles)), `${Date.now()}.vtt`)}>\n                    <i className=\"icon-download\"></i>\n                    <Translate value=\"save\" />\n                </Menu>\n                <Menu onClick={() => props.undoSubtitles()}>\n                    <i className=\"icon-ccw\"></i>\n                    <Translate value=\"undo\" />\n                </Menu>\n                <Menu\n                    onClick={() => {\n                        if (window.confirm(t('clear-warning'))) {\n                            props.cleanSubtitles();\n                        }\n                    }}\n                >\n                    <i className=\"icon-trash-empty\"></i>\n                    <Translate value=\"clear\" />\n                </Menu>\n              \n            </Left>\n            <Right>\n               {/* <I18n>\n                    <i className=\"icon-language\"></i>\n                    <select value={getName(props.language)} onChange={event => props.updateLang(event.target.value)}>\n                        {Object.keys(names).map(key => (\n                            <option key={key} value={key}>\n                                {names[key]}\n                            </option>\n                        ))}\n                    </select>\n                        </I18n>*/}\n            </Right>\n            {props.options.uploadDialog ? (\n                <Dialog title={t('open')} onClose={() => props.setOption({ uploadDialog: false })}>\n                    <Upload {...props} />\n                </Dialog>\n            ) : null}\n            {props.options.helpDialog ? (\n                <Dialog title={t('help')} onClose={() => props.setOption({ helpDialog: false })}>\n                    <Help {...props} />\n                </Dialog>\n            ) : null}\n            {props.options.donateDialog ? (\n                <Dialog title={t('donate')} onClose={() => props.setOption({ donateDialog: false })}>\n                    <Donate {...props} />\n                </Dialog>\n            ) : null}\n        </Header>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport ArtplayerComponent from 'artplayer-react';\n\nconst Player = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 120%;\n    width: 100%;\n    padding: 20px;\n    background-color: rgba(0, 0, 0, 0.5);\n`;\n\nexport default React.memo(\n    function({ options, setPlayer, setCurrentTime }) {\n      \n        return (\n            <Player>\n                <ArtplayerComponent\n                   \n                    style={{\n                        width: '100%',\n                        height: '100%',\n                    }}\n                    option={{\n                        url: options.videoUrl,\n                        loop: true,\n                        autoSize: false,\n                        aspectRatio: true,\n                        \n                        playbackRate: true,\n                        fullscreen: true,\n                        fullscreenWeb: true,\n                        miniProgressBar: true,\n                        subtitle: {\n                            url: options.subtitleUrl,\n                        },\n                        moreVideoAttr: {\n                            crossOrigin: 'anonymous',\n                            preload: 'auto',\n                        },\n                        muted: false,\n                        autoplay: false,\n                      \n                        autoSize: true,\n                      \n                        setting: true,\n                        loop: true,\n                        playbackRate: true,\n                        aspectRatio: true,\n                        fullscreen: true,\n                        fullscreenWeb: true,\n                        mutex: true,\n                    }}\n                    getInstance={art => {\n                        setPlayer(art);\n\n                        (function loop() {\n                            window.requestAnimationFrame(() => {\n                                if (art.playing) {\n                                    setCurrentTime(art.currentTime);\n                                }\n                                loop();\n                            });\n                        })();\n\n                        art.on('seek', () => {\n                            setCurrentTime(art.currentTime);\n                        });\n                    }}\n                />\n            </Player>\n        );\n    },\n    () => true,\n);\n","import React from 'react';\nimport styled from 'styled-components';\nimport languages from '../translate/languages';\nimport { Translate } from 'react-i18nify';\n\nconst Tool = styled.div`\n    flex: 1;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    font-size: 13px;\n\n    .item {\n        display: flex;\n        align-items: center;\n        padding: 5px 10px;\n        border-bottom: 1px solid rgba(0, 0, 0, 0.4);\n\n        .value {\n            display: flex;\n            align-items: center;\n            select {\n                outline: none;\n                margin-left: 15px;\n            }\n            button {\n                height: 25px;\n                border: none;\n                padding: 0 10px;\n                margin-left: 15px;\n                outline: none;\n                cursor: pointer;\n                font-size: 12px;\n                color: #fff;\n                border-radius: 3px;\n                background-color: rgb(26, 83, 109);\n                transition: all 0.2s ease;\n                &:hover {\n                    color: #fff;\n                    background-color: #2196f3;\n                }\n                i {\n                    margin-right: 5px;\n                }\n            }\n        }\n    }\n`;\n\nexport default function({ language, options, setOption, translateSubtitles, timeOffsetSubtitles }) {\n    return (\n        <Tool>\n        \n        {/*    <div className=\"item\">\n          <div className=\"title\">\n                   <Translate value=\"google-translate\" />\n                </div>\n                <div className=\"value\">\n                    <select\n                        value={options.translationLanguage}\n                        onChange={event => setOption({ translationLanguage: event.target.value })}\n                    >\n                        {(languages[language] || languages.en).map(item => (\n                            <option key={item.key} value={item.key}>\n                                {item.name}\n                            </option>\n                        ))}\n                        \n                    </select>\n                    <button onClick={() => translateSubtitles()}>\n                        \n                        <Translate value=\"confirm\" />\n                    </button>\n                </div>\n                       \n                        </div>*/}\n            <div className=\"item\">\n                <div className=\"title\">\n                    <Translate value=\"time-offset\" />\n                </div>\n                {/*\n                <div className=\"value\">\n                    <button onClick={() => timeOffsetSubtitles(-0.1)}>-100ms</button>\n                    <button onClick={() => timeOffsetSubtitles(0.1)}>+100ms</button>\n                    <button onClick={() => timeOffsetSubtitles(-1)}>-1000ms</button>\n                    <button onClick={() => timeOffsetSubtitles(1)}>+1000ms</button>\n                </div>*/\n}\n            </div>\n        </Tool>\n    );\n}\n","import React, { useEffect, useState, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { Table } from 'react-virtualized';\nimport debounce from 'lodash/debounce';\nimport unescape from 'lodash/unescape';\nimport clamp from 'lodash/clamp';\nimport { timeToSecond, secondToTime } from '../utils';\n\nconst Subtitle = styled.div`\n    .ReactVirtualized__Table {\n        font-size: 12px;\n        .ReactVirtualized__Table__Grid {\n            outline: none;\n        }\n        .ReactVirtualized__Table__row {\n            transition: all 0.2s ease;\n            &.odd {\n                background-color: rgb(35, 40, 64);\n            }\n            &.highlight {\n                background-color: #2196f3;\n            }\n            &.illegal {\n                background-color: #c75123;\n            }\n            .row {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                flex-direction: column;\n                color: #fff;\n                height: 100%;\n                padding: 10px 5px;\n                border-bottom: 1px solid #000;\n            }\n        }\n\n        .input,\n        .textarea {\n            border: none;\n            width: 100%;\n            color: #fff;\n            font-size: 12px;\n            text-align: center;\n            background-color: rgba(0, 0, 0, 0.4);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            resize: none;\n            outline: none;\n        }\n        .textarea1 {\n            border: none;\n            width: 70%;\n            color: #fff;\n            font-size: 12px;\n            text-align: center;\n            background-color: rgba(0, 0, 0, 0.1);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            resize: none;\n            outline: none;\n        }\n\n        .input {\n            height: 25px;\n            line-height: 25px;\n            cursor: col-resize;\n            user-select: none;\n        }\n\n        .textarea {\n            padding: 5px;\n            height: 100%;\n            line-height: 1.5;\n        }\n        .textarea1 {\n            padding: 5px;\n            height: 100%;\n            line-height: 1.5;\n        }\n\n        .operation {\n            i {\n                font-size: 12px;\n                cursor: pointer;\n            }\n        }\n    }\n`;\n\nexport default function({\n    player,\n    subtitles,\n    refe_subtitles,\n    addSubtitle,\n    currentIndex,\n    updateSubtitle,\n    removeSubtitle,\n    translateSubtitle,\n    checkSubtitle,\n}) {\n    let isDroging = false;\n    let lastPageX = 0;\n    let lastSub = null;\n    let lastKey = '';\n    let lastValue = '';\n  \n    function onMouseDown(event, sub, key) {\n        isDroging = true;\n        lastPageX = event.pageX;\n        lastSub = sub;\n        lastKey = key;\n    }\n\n    function onMouseMove(event, sub, key) {\n        if (isDroging) {\n            const time = Number(((event.pageX - lastPageX) / 10).toFixed(3));\n            lastValue = secondToTime(clamp(timeToSecond(sub[key]) + time, 0, Infinity));\n        }\n    }\n\n    function onMouseUp() {\n        if (isDroging) {\n            if (lastSub && lastKey && lastValue) {\n                updateSubtitle(lastSub, lastKey, lastValue);\n            }\n            isDroging = false;\n            lastPageX = 0;\n            lastSub = null;\n            lastKey = '';\n            lastValue = '';\n        }\n    }\n\n    const [width, setWidth] = useState(100);\n    const [height, setHeight] = useState(100);\n\n    const resize = useCallback(() => {\n        setWidth(document.body.clientWidth / 2);\n        setHeight(document.body.clientHeight );\n    }, [setWidth, setHeight]);\n\n    useEffect(() => {\n        resize();\n        if (!resize.init) {\n            resize.init = true;\n            const debounceResize = debounce(resize, 500);\n            window.addEventListener('resize', debounceResize);\n        }\n    }, [resize]);\n\n    return (\n       \n        <Subtitle>\n            <Table\n                headerHeight={40}\n                width={width}\n                height={height}\n                rowHeight={80}\n                scrollToIndex={currentIndex}\n                rowCount={subtitles.length}\n                rowGetter={({ index }) => subtitles[index]}\n               \n                headerRowRenderer={() => null}\n                rowRenderer={props => {\n                   \n                    return (\n                        <div\n                            key={props.key}\n                            className={[\n                                props.className,\n                                props.index % 2 ? 'odd' : '',\n                                currentIndex === props.index ? 'highlight' : '',\n                                checkSubtitle(props.rowData) ? 'illegal' : '',\n                            ]\n                                .join(' ')\n                                .trim()}\n                            style={props.style}\n                            onClick={() => {\n                                player.pause = true;\n                                if (player.duration >= props.rowData.startTime) {\n                                    player.seek = props.rowData.startTime + 0.001;\n                                }\n                            }}\n                        >\n                            <div className=\"row operation\" style={{ width: 30 }}>\n                               \n                            </div>\n                            <div className=\"row time\" style={{ width: 150 }} onMouseUp={onMouseUp}>\n                                <div\n                                    className=\"input\"\n                                    onMouseDown={event => onMouseDown(event, props.rowData, 'start')}\n                                    onMouseMove={event => onMouseMove(event, props.rowData, 'start')}\n                                    style={{ marginBottom: 10 }}\n                                >\n                                    {props.rowData.start}\n                                </div>\n                                <div\n                                    className=\"input\"\n                                    onMouseDown={event => onMouseDown(event, props.rowData, 'end')}\n                                    onMouseMove={event => onMouseMove(event, props.rowData, 'end')}\n                                >\n                                    {props.rowData.end}\n                                </div>\n                            </div>\n                            <div className=\"row duration\" style={{ width: 70 }}>\n                                {props.rowData.duration}\n                            </div>\n                            <div className=\"row text\" style={{ flex: 1 }}>\n                                \n                            \n                                <p>{props.rowData.text}</p>\n                            </div>\n                            \n                            <div className=\"row text\" style={{ flex: 1 }}>\n                                \n                                <textarea\n                                    maxLength={200}\n                                    spellCheck={false}\n                                    className=\"textarea\"\n                                    value={unescape(props.rowData.text2)}\n                                    onChange={event => updateSubtitle(props.rowData, 'text2', event.target.value)}\n                                \n                                />\n                            </div>\n                        </div>\n                    );\n                }}\n            ></Table>\n        </Subtitle>\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport Player from './Player';\nimport Tool from './Tool';\nimport Subtitle from './Subtitle';\n\nconst Main = styled.div`\n    position: relative;\n    display: flex;\n    justify-content: space-between;\n    flex: 1;\n    border-bottom: 1px solid #000;\n`;\n\nconst Left = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    width: 50%;\n    border-right: 1px solid #000;\n`;\n\nconst Right = styled.div`\n    display: flex;\n    height: 100%;\n    flex: 1;\n`;\n\nexport default function(props) {\n    \n    return (\n        <Main>\n            <Left>\n                <Player {...props} />\n                <Tool {...props} />\n            </Left>\n            <Right>\n                <Subtitle {...props} />\n            </Right>\n        </Main>\n    );\n}\n","export default class Emitter {\n    on(name, fn, ctx) {\n        const e = this.e || (this.e = {});\n        (e[name] || (e[name] = [])).push({ fn, ctx });\n        return this;\n    }\n\n    once(name, fn, ctx) {\n        const self = this;\n        function listener(...args) {\n            self.off(name, listener);\n            fn.apply(ctx, args);\n        }\n        listener._ = fn;\n        return this.on(name, listener, ctx);\n    }\n\n    emit(name, ...data) {\n        const evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n        for (let i = 0; i < evtArr.length; i += 1) {\n            evtArr[i].fn.apply(evtArr[i].ctx, data);\n        }\n        return this;\n    }\n\n    off(name, callback) {\n        const e = this.e || (this.e = {});\n        const evts = e[name];\n        const liveEvents = [];\n        if (evts && callback) {\n            for (let i = 0, len = evts.length; i < len; i += 1) {\n                if (evts[i].fn !== callback && evts[i].fn._ !== callback) liveEvents.push(evts[i]);\n            }\n        }\n        if (liveEvents.length) {\n            e[name] = liveEvents;\n        } else {\n            delete e[name];\n        }\n        return this;\n    }\n}\n","export default class Events {\n    constructor() {\n        this.destroyEvents = [];\n        this.proxy = this.proxy.bind(this);\n    }\n\n    proxy(target, name, callback, option = {}) {\n        if (Array.isArray(name)) {\n            name.forEach(item => this.proxy(target, item, callback, option));\n        } else {\n            target.addEventListener(name, callback, option);\n            this.destroyEvents.push(() => {\n                target.removeEventListener(name, callback, option);\n            });\n        }\n    }\n\n    destroy() {\n        this.destroyEvents.forEach(event => event());\n    }\n}\n","import DT from 'duration-time-conversion';\n\nexport class WFPlayerError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'WFPlayerError';\n    }\n}\n\nexport function errorHandle(condition, msg) {\n    if (!condition) {\n        throw new WFPlayerError(msg);\n    }\n    return condition;\n}\n\nexport function durationToTime(duration = 0) {\n    return DT.d2t(duration.toFixed(3));\n}\n\nexport function timeToDuration(time) {\n    return DT.t2d(time);\n}\n\nexport function mergeBuffer(...buffers) {\n    const Cons = buffers[0].constructor;\n    return buffers.reduce((pre, val) => {\n        const merge = new Cons((pre.byteLength | 0) + (val.byteLength | 0));\n        merge.set(pre, 0);\n        merge.set(val, pre.byteLength | 0);\n        return merge;\n    }, new Cons());\n}\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function setStyle(element, key, value) {\n    if (typeof key === 'object') {\n        Object.keys(key).forEach(item => {\n            setStyle(element, item, key[item]);\n        });\n    }\n    element.style[key] = value;\n    return element;\n}","import { errorHandle } from './utils';\n\nexport default class Template {\n    constructor(wf) {\n        this.wf = wf;\n        this.canvas = null;\n        this.update();\n    }\n\n    update() {\n        const { container, pixelRatio } = this.wf.options;\n        const { clientWidth, clientHeight } = container;\n        if (this.canvas) {\n            this.canvas.width = clientWidth * pixelRatio;\n            this.canvas.height = clientHeight * pixelRatio;\n        } else {\n            errorHandle(\n                this.wf.constructor.instances.every(wf => wf.options.container !== container),\n                'Cannot mount multiple instances on the same dom element, please destroy the previous instance first.',\n            );\n            errorHandle(clientWidth && clientHeight, 'The width and height of the container cannot be 0');\n            container.innerHTML = '';\n            this.canvas = document.createElement('canvas');\n            this.canvas.width = clientWidth * pixelRatio;\n            this.canvas.height = clientHeight * pixelRatio;\n            this.canvas.style.width = '100%';\n            this.canvas.style.height = '100%';\n            container.appendChild(this.canvas);\n        }\n    }\n\n    exportImage() {\n        const elink = document.createElement('a');\n        elink.style.display = 'none';\n        elink.href = this.canvas.toDataURL('image/png');\n        elink.download = `${Date.now()}.png`;\n        document.body.appendChild(elink);\n        elink.click();\n        document.body.removeChild(elink);\n    }\n\n    destroy() {\n        this.wf.options.container.innerHTML = '';\n    }\n}\n","import { durationToTime, clamp } from './utils';\n\nexport default class Drawer {\n    constructor(wf) {\n        this.wf = wf;\n        this.canvas = wf.template.canvas;\n        this.ctx = this.canvas.getContext('2d');\n        this.gridNum = 0;\n        this.gridGap = 0;\n        this.beginTime = 0;\n\n        this.update();\n\n        wf.on('options', () => {\n            this.update();\n        });\n\n        wf.on('channelData', () => {\n            this.update();\n        });\n    }\n\n    update() {\n        const {\n            currentTime,\n            options: { cursor, grid, ruler, wave, duration, padding },\n        } = this.wf;\n        this.gridNum = duration * 10 + padding * 2;\n        this.gridGap = this.canvas.width / this.gridNum;\n        this.beginTime = Math.floor(currentTime / duration) * duration;\n\n        this.wf.emit('render', {\n            padding,\n            duration,\n            gridGap: this.gridGap,\n            gridNum: this.gridNum,\n            beginTime: this.beginTime,\n        });\n\n        this.drawBackground();\n        if (grid) {\n            this.drawGrid();\n        }\n        if (ruler) {\n            this.drawRuler();\n        }\n        if (wave) {\n            this.drawWave();\n        }\n        if (cursor) {\n            this.drawCursor();\n        }\n    }\n\n    drawBackground() {\n        const { backgroundColor, paddingColor, padding } = this.wf.options;\n        const { width, height } = this.canvas;\n        this.ctx.clearRect(0, 0, width, height);\n        this.ctx.fillStyle = backgroundColor;\n        this.ctx.fillRect(0, 0, width, height);\n        this.ctx.fillStyle = paddingColor;\n        this.ctx.fillRect(0, 0, padding * this.gridGap, height);\n        this.ctx.fillRect(width - padding * this.gridGap, 0, padding * this.gridGap, height);\n    }\n\n    drawWave() {\n        const {\n            currentTime,\n            options: { progress, waveColor, progressColor, duration, padding, waveScale },\n            decoder: {\n                channelData,\n                audiobuffer: { sampleRate },\n            },\n        } = this.wf;\n        const { width, height } = this.canvas;\n        const middle = height / 2;\n        const waveWidth = width - this.gridGap * padding * 2;\n        const startIndex = clamp(this.beginTime * sampleRate, 0, Infinity);\n        const endIndex = clamp((this.beginTime + duration) * sampleRate, startIndex, Infinity);\n        const step = Math.floor((endIndex - startIndex) / waveWidth);\n        const cursorX = padding * this.gridGap + (currentTime - this.beginTime) * this.gridGap * 10;\n\n        let stepIndex = 0;\n        let xIndex = 0;\n        let min = 1;\n        let max = -1;\n        for (let i = startIndex; i < endIndex; i += 1) {\n            stepIndex += 1;\n            const item = channelData[i] || 0;\n            if (item < min) {\n                min = item;\n            } else if (item > max) {\n                max = item;\n            }\n            if (stepIndex >= step && xIndex < waveWidth) {\n                xIndex += 1;\n                const waveX = this.gridGap * padding + xIndex;\n                this.ctx.fillStyle = progress && cursorX >= waveX ? progressColor : waveColor;\n                this.ctx.fillRect(\n                    waveX,\n                    (1 + min * waveScale) * middle,\n                    1,\n                    Math.max(1, (max - min) * middle * waveScale),\n                );\n                stepIndex = 0;\n                min = 1;\n                max = -1;\n            }\n        }\n    }\n\n    drawGrid() {\n        const { gridColor, pixelRatio } = this.wf.options;\n        const { width, height } = this.canvas;\n        this.ctx.fillStyle = gridColor;\n        for (let index = 0; index < this.gridNum; index += 1) {\n            this.ctx.fillRect(this.gridGap * index, 0, pixelRatio, height);\n        }\n        for (let index = 0; index < height / this.gridGap; index += 1) {\n            this.ctx.fillRect(0, this.gridGap * index, width, pixelRatio);\n        }\n    }\n\n    drawRuler() {\n        const { rulerColor, pixelRatio, padding, rulerAtTop } = this.wf.options;\n        const { height } = this.canvas;\n        const fontSize = 11;\n        const fontHeight = 15;\n        const fontTop = 30;\n        this.ctx.font = `${fontSize * pixelRatio}px Arial`;\n        this.ctx.fillStyle = rulerColor;\n        let second = -1;\n        for (let index = 0; index < this.gridNum; index += 1) {\n            if (index && index >= padding && index <= this.gridNum - padding && (index - padding) % 10 === 0) {\n                second += 1;\n                this.ctx.fillRect(\n                    this.gridGap * index,\n                    rulerAtTop ? 0 : height - fontHeight * pixelRatio,\n                    pixelRatio,\n                    fontHeight * pixelRatio,\n                );\n                this.ctx.fillText(\n                    durationToTime(this.beginTime + second).split('.')[0],\n                    this.gridGap * index - fontSize * pixelRatio * 2 + pixelRatio,\n                    rulerAtTop ? fontTop * pixelRatio : height - fontTop * pixelRatio + fontSize,\n                );\n            } else if (index && (index - padding) % 5 === 0) {\n                this.ctx.fillRect(\n                    this.gridGap * index,\n                    rulerAtTop ? 0 : height - (fontHeight / 2) * pixelRatio,\n                    pixelRatio,\n                    (fontHeight / 2) * pixelRatio,\n                );\n            }\n        }\n    }\n\n    drawCursor() {\n        const {\n            currentTime,\n            options: { cursorColor, pixelRatio, padding },\n        } = this.wf;\n        const { height } = this.canvas;\n        this.ctx.fillStyle = cursorColor;\n        this.ctx.fillRect(\n            padding * this.gridGap + (currentTime - this.beginTime) * this.gridGap * 10,\n            0,\n            pixelRatio,\n            height,\n        );\n    }\n}\n","import throttle from 'lodash/throttle';\n\nexport default class Decoder {\n    constructor(wf) {\n        this.wf = wf;\n        this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n        this.throttleDecodeAudioData = throttle(this.decodeAudioData, 1000);\n        this.audiobuffer = this.audioCtx.createBuffer(2, 22050, 44100);\n        this.channelData = new Float32Array();\n\n        this.wf.on('loading', (uint8) => {\n            this.throttleDecodeAudioData(uint8);\n        });\n    }\n\n    decodeAudioData(uint8) {\n        const {\n            options: { channel },\n        } = this.wf;\n        this.audioCtx.decodeAudioData(\n            uint8.buffer,\n            (audiobuffer) => {\n                this.audiobuffer = audiobuffer;\n                this.wf.emit('audiobuffer', this.audiobuffer);\n                this.wf.emit('decodeing', this.audiobuffer.duration / this.wf.duration);\n                this.channelData = audiobuffer.getChannelData(channel);\n                this.wf.emit('channelData', this.channelData);\n            },\n            (error) => {\n                console.warn(`It seems that the AudioContext decoding get wrong: ${error.message.trim()}`);\n            },\n        );\n    }\n\n    changeChannel(channel) {\n        this.channelData = this.audiobuffer.getChannelData(channel);\n        this.wf.emit('channelData', this.channelData);\n    }\n\n    destroy() {\n        this.audiobuffer = this.audioCtx.createBuffer(2, 22050, 44100);\n        this.channelData = new Float32Array();\n    }\n}\n","import { mergeBuffer } from './utils';\n\nexport default class Loader {\n    constructor(wf) {\n        this.wf = wf;\n        this.fileSize = 0;\n        this.loadSize = 0;\n        this.data = new Uint8Array();\n        this.reader = null;\n        this.abortController = null;\n    }\n\n    load(url) {\n        this.destroy();\n        this.abortController = new AbortController();\n        const { withCredentials, cors, headers } = this.wf.options;\n        this.wf.emit('loadStart');\n        return fetch(url, {\n            credentials: withCredentials ? 'include' : 'omit',\n            mode: cors ? 'cors' : 'no-cors',\n            signal: this.abortController.signal,\n            headers,\n        })\n            .then(response => {\n                if (response.body && typeof response.body.getReader === 'function') {\n                    this.fileSize = Number(response.headers.get('content-length'));\n                    this.wf.emit('fileSize', this.fileSize);\n                    this.reader = response.body.getReader();\n                    return function read() {\n                        return this.reader.read().then(({ done, value }) => {\n                            if (done) {\n                                this.wf.emit('loadEnd');\n                                return null;\n                            }\n                            this.loadSize += value.byteLength;\n                            this.wf.emit('downloading', this.loadSize / this.fileSize);\n                            this.data = mergeBuffer(this.data, value);\n                            this.wf.emit('loading', this.data.slice());\n                            return read.call(this);\n                        });\n                    }.call(this);\n                }\n                return response.arrayBuffer();\n            })\n            .then(arrayBuffer => {\n                if (arrayBuffer && arrayBuffer.byteLength) {\n                    const uint8 = new Uint8Array(arrayBuffer);\n                    this.fileSize = uint8.byteLength;\n                    this.wf.emit('fileSize', this.fileSize);\n                    this.loadSize = uint8.byteLength;\n                    this.wf.emit('downloading', this.loadSize / this.fileSize);\n                    this.wf.emit('loading', uint8);\n                    this.wf.emit('loadEnd');\n                }\n            });\n    }\n\n    destroy() {\n        this.fileSize = 0;\n        this.loadSize = 0;\n        this.data = new Uint8Array();\n        if (this.reader) {\n            this.reader.cancel();\n            this.reader = null;\n        }\n        if (this.abortController) {\n            this.abortController.abort();\n            this.abortController = null;\n        }\n    }\n}\n","import throttle from 'lodash/throttle';\nimport { clamp } from './utils';\n\nexport default class Controller {\n    constructor(wf) {\n        this.wf = wf;\n        this.playTimer = null;\n        this.wf.on('load', () => {\n            this.clickInit();\n            this.resizeInit();\n            this.playInit();\n        });\n    }\n\n    getTimeFromEvent(event) {\n        const {\n            currentTime,\n            template: { canvas },\n            options: { duration, padding, container, pixelRatio },\n        } = this.wf;\n        const gridNum = duration * 10 + padding * 2;\n        const gridGap = canvas.width / gridNum;\n        const left = clamp(event.pageX - container.offsetLeft - (padding * gridGap) / pixelRatio, 0, Infinity);\n        const beginTime = Math.floor(currentTime / duration) * duration;\n        const time = clamp(((left / gridGap) * pixelRatio) / 10 + beginTime, beginTime, beginTime + duration);\n        return time;\n    }\n\n    clickInit() {\n        const {\n            template: { canvas },\n            events: { proxy },\n            options: { mediaElement },\n        } = this.wf;\n        proxy(canvas, ['click', 'contextmenu'], event => {\n            const time = this.getTimeFromEvent(event);\n            this.wf.emit(event.type, time, event);\n            if (mediaElement && mediaElement.currentTime !== time) {\n                mediaElement.currentTime = time;\n            }\n            this.wf.drawer.update();\n        });\n    }\n\n    resizeInit() {\n        const {\n            template,\n            drawer,\n            events: { proxy },\n        } = this.wf;\n\n        const throttleResize = throttle(() => {\n            template.update();\n            drawer.update();\n            this.wf.emit('resize');\n        }, 500);\n\n        proxy(window, ['resize', 'orientationchange'], () => {\n            throttleResize();\n        });\n    }\n\n    playInit() {\n        const {\n            drawer,\n            events: { proxy },\n            options: { mediaElement },\n        } = this.wf;\n        if (!mediaElement) return;\n\n        proxy(mediaElement, 'seeked', () => {\n            drawer.update();\n        });\n\n        (function loop() {\n            this.playTimer = requestAnimationFrame(() => {\n                if (this.wf.playing) {\n                    drawer.update();\n                    this.wf.emit('playing', mediaElement.currentTime);\n                }\n\n                if (!this.wf.isDestroy) {\n                    loop.call(this);\n                }\n            });\n        }.call(this));\n    }\n\n    destroy() {\n        cancelAnimationFrame(this.playTimer);\n    }\n}\n","import validator from 'option-validator';\nimport Emitter from './emitter';\nimport Events from './events';\nimport Template from './template';\nimport Drawer from './drawer';\nimport Decoder from './decoder';\nimport Loader from './loader';\nimport Controller from './controller';\nimport { timeToDuration, clamp, errorHandle } from './utils';\n\nlet id = 0;\nconst instances = [];\nexport default class WFPlayer extends Emitter {\n    static get instances() {\n        return instances;\n    }\n\n    static get version() {\n        return '__VERSION__';\n    }\n\n    static get env() {\n        return '__ENV__';\n    }\n\n    static get default() {\n        return {\n            container: '#waveform',\n            mediaElement: null,\n            wave: true,\n            waveColor: 'rgba(255, 255, 255, 0.1)',\n            backgroundColor: 'rgb(28, 32, 34)',\n            paddingColor: 'rgba(255, 255, 255, 0.05)',\n            cursor: true,\n            cursorColor: '#ff0000',\n            progress: true,\n            progressColor: 'rgba(255, 255, 255, 0.5)',\n            grid: true,\n            gridColor: 'rgba(255, 255, 255, 0.05)',\n            ruler: true,\n            rulerColor: 'rgba(255, 255, 255, 0.5)',\n            rulerAtTop: true,\n            withCredentials: false,\n            cors: false,\n            headers: {},\n            channel: 0,\n            duration: 10,\n            padding: 5,\n            waveScale: 0.8,\n            pixelRatio: window.devicePixelRatio,\n        };\n    }\n\n    static get scheme() {\n        const checkNum = (name, min, max, isInteger) => (value, type) => {\n            errorHandle(type === 'number', `${name} expects to receive number as a parameter, but got ${type}.`);\n            errorHandle(\n                value >= min && value <= max && (isInteger ? Number.isInteger(value) : true),\n                `'options.${name}' expect ${\n                    isInteger ? 'an integer ' : 'a '\n                }number that >= ${min} and <= ${max}, but got ${value}.`,\n            );\n            return true;\n        };\n\n        return {\n            container: 'htmlelement|htmldivelement',\n            mediaElement: 'null|htmlvideoelement|htmlaudioelement',\n            wave: 'boolean',\n            waveColor: 'string',\n            backgroundColor: 'string',\n            paddingColor: 'string',\n            cursor: 'boolean',\n            cursorColor: 'string',\n            progress: 'boolean',\n            progressColor: 'string',\n            grid: 'boolean',\n            gridColor: 'string',\n            ruler: 'boolean',\n            rulerColor: 'string',\n            rulerAtTop: 'boolean',\n            withCredentials: 'boolean',\n            cors: 'boolean',\n            headers: 'object',\n            channel: checkNum('channel', 0, 5, true),\n            duration: checkNum('duration', 1, 100, true),\n            padding: checkNum('padding', 1, 100, true),\n            waveScale: checkNum('waveScale', 0.1, 10, false),\n            pixelRatio: checkNum('pixelRatio', 1, 10, false),\n        };\n    }\n\n    constructor(options = {}) {\n        super();\n\n        this._currentTime = 0;\n        this.isDestroy = false;\n        this.options = {};\n        this.setOptions(options);\n\n        this.events = new Events(this);\n        this.template = new Template(this);\n        this.decoder = new Decoder(this);\n        this.drawer = new Drawer(this);\n        this.controller = new Controller(this);\n        this.loader = new Loader(this);\n\n        id += 1;\n        this.id = id;\n        instances.push(this);\n    }\n\n    get currentTime() {\n        return this.options.mediaElement ? this.options.mediaElement.currentTime : this._currentTime;\n    }\n\n    get duration() {\n        return this.options.mediaElement ? this.options.mediaElement.duration : timeToDuration('99:59:59.999');\n    }\n\n    get playing() {\n        const { mediaElement } = this.options;\n        if (mediaElement) {\n            return !!(\n                mediaElement.currentTime > 0 &&\n                !mediaElement.paused &&\n                !mediaElement.ended &&\n                mediaElement.readyState > 2\n            );\n        }\n        return false;\n    }\n\n    setOptions(options = {}) {\n        errorHandle(validator.kindOf(options) === 'object', 'setOptions expects to receive object as a parameter.');\n\n        if (typeof options.container === 'string') {\n            options.container = document.querySelector(options.container);\n        }\n\n        if (typeof options.mediaElement === 'string') {\n            options.mediaElement = document.querySelector(options.mediaElement);\n        }\n\n        this.options = validator(\n            {\n                ...WFPlayer.default,\n                ...this.options,\n                ...options,\n            },\n            WFPlayer.scheme,\n        );\n\n        this.emit('options', this.options);\n        return this;\n    }\n\n    load(target) {\n        if (target instanceof HTMLVideoElement || target instanceof HTMLAudioElement) {\n            this.options.mediaElement = target;\n            target = target.src;\n        }\n        errorHandle(\n            typeof target === 'string' && target.trim(),\n            `The load target is not a string. If you are loading a mediaElement, make sure the mediaElement.src is not empty.`,\n        );\n        this.loader.load(target);\n        this.emit('load');\n        return this;\n    }\n\n    seek(second) {\n        errorHandle(typeof second === 'number', 'seek expects to receive number as a parameter.');\n        this._currentTime = clamp(second, 0, this.duration);\n        if (this.options.mediaElement && this.options.mediaElement.currentTime !== this._currentTime) {\n            this.options.mediaElement.currentTime = this._currentTime;\n        }\n        this.drawer.update();\n        return this;\n    }\n\n    changeChannel(channel) {\n        this.setOptions({ channel });\n        this.decoder.changeChannel(channel);\n    }\n\n    exportImage() {\n        this.template.exportImage();\n        return this;\n    }\n\n    destroy() {\n        this.isDestroy = true;\n        this.events.destroy();\n        this.template.destroy();\n        this.controller.destroy();\n        this.decoder.destroy();\n        this.loader.destroy();\n        instances.splice(instances.indexOf(this), 1);\n    }\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport isEqual from 'lodash/isEqual';\nimport { notify, secondToTime, getKeyCode } from '../utils';\nimport { t, Translate } from 'react-i18nify';\n\nconst Block = styled.div`\n    position: absolute;\n    z-index: 9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n\n    .contextmenu {\n        position: absolute;\n        z-index: 4;\n        left: 0;\n        top: 0;\n        pointer-events: all;\n\n        .contextmenu-item {\n            height: 30px;\n            padding: 0 10px;\n            line-height: 30px;\n            cursor: pointer;\n            font-size: 12px;\n            color: #ccc;\n            user-select: none;\n            background-color: rgba(0, 0, 0, 0.75);\n            transition: all 0.2s ease;\n            &:hover {\n                color: #fff;\n                background-color: #2196f3;\n            }\n        }\n    }\n\n    .sub-item {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 100%;\n        overflow: hidden;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-align: center;\n        color: #fff;\n        font-size: 13px;\n        cursor: move;\n        user-select: none;\n        pointer-events: all;\n        text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n        background-color: rgba(255, 255, 255, 0.2);\n        border-left: 1px solid rgba(255, 255, 255, 0.2);\n        border-right: 1px solid rgba(255, 255, 255, 0.2);\n\n        &:hover {\n            background-color: rgba(255, 255, 255, 0.3);\n        }\n\n        &.sub-highlight {\n            background-color: rgba(33, 150, 243, 0.5);\n            border-left: 1px solid rgba(33, 150, 243, 0.5);\n            border-right: 1px solid rgba(33, 150, 243, 0.5);\n        }\n\n        &.sub-illegal {\n            background-color: rgba(199, 81, 35, 0.5);\n        }\n\n        .sub-handle {\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            height: 100%;\n            cursor: col-resize;\n            user-select: none;\n            &:hover {\n                background-color: rgba(255, 255, 255, 0.1);\n            }\n        }\n\n        .sub-text {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            flex-direction: column;\n            word-break: break-all;\n            width: 100%;\n            height: 100%;\n            padding: 0 20px;\n            p {\n                margin: 5px 0;\n                line-height: 1;\n            }\n        }\n    }\n`;\n\nfunction getCurrentSubs(subs, beginTime, duration) {\n    return subs.filter((item) => {\n        return (\n            (item.startTime >= beginTime && item.startTime <= beginTime + duration) ||\n            (item.endTime >= beginTime && item.endTime <= beginTime + duration) ||\n            (item.startTime < beginTime && item.endTime > beginTime + duration)\n        );\n    });\n}\n\nfunction magnetically(time, closeTime) {\n    if (!closeTime) return time;\n    if (time > closeTime - 0.1 && closeTime + 0.1 > time) {\n        return closeTime;\n    }\n    return time;\n}\n\nlet lastTarget = null;\nlet lastSub = null;\nlet lastType = '';\nlet lastX = 0;\nlet lastIndex = -1;\nlet lastWidth = 0;\nlet lastDiffX = 0;\nlet isDroging = false;\n\nexport default React.memo(\n    function ({\n        player,\n        subtitles,\n        render,\n        currentTime,\n        checkSubtitle,\n        removeSubtitle,\n        addSubtitle,\n        hasSubtitle,\n        mergeSubtitle,\n        updateSubtitle,\n    }) {\n        const [contextMenu, setContextMenu] = useState(false);\n        const [contextMenuX, setContextMenuX] = useState(0);\n        const [contextMenuY, setContextMenuY] = useState(0);\n\n        const $blockRef = React.createRef();\n        const $contextMenuRef = React.createRef();\n        const $subsRef = React.createRef();\n        const currentSubs = getCurrentSubs(subtitles, render.beginTime, render.duration);\n        const gridGap = document.body.clientWidth / render.gridNum;\n        const currentIndex = currentSubs.findIndex(\n            (item) => item.startTime <= currentTime && item.endTime > currentTime,\n        );\n\n        const onContextMenu = (sub, event) => {\n            lastSub = sub;\n            event.preventDefault();\n            const $subs = event.target;\n            const subsTop = $subs.getBoundingClientRect().top;\n            const $contextMenu = $contextMenuRef.current;\n            const top =\n                event.pageY + $contextMenu.clientHeight > document.body.clientHeight\n                    ? document.body.clientHeight - $contextMenu.clientHeight - subsTop\n                    : event.pageY - subsTop;\n            const left =\n                event.pageX + $contextMenu.clientWidth > document.body.clientWidth\n                    ? document.body.clientWidth - $contextMenu.clientWidth\n                    : event.pageX;\n            setContextMenuX(left);\n            setContextMenuY(top);\n            setContextMenu(true);\n        };\n\n        const onDocumentClick = useCallback(\n            (event) => {\n                if (event.composedPath) {\n                    const composedPath = event.composedPath() || [];\n                    if (composedPath.includes($contextMenuRef.current)) {\n                        setContextMenu(false);\n                    }\n                }\n            },\n            [$contextMenuRef, setContextMenu],\n        );\n\n        const onMouseDown = (sub, event, type) => {\n            isDroging = true;\n            lastSub = sub;\n            lastType = type;\n            lastX = event.pageX;\n            lastIndex = currentSubs.indexOf(sub);\n            lastTarget = $subsRef.current.children[lastIndex];\n            lastWidth = parseFloat(lastTarget.style.width);\n        };\n\n        const onDocumentMouseMove = useCallback((event) => {\n            if (isDroging && lastTarget) {\n                lastDiffX = event.pageX - lastX;\n                if (lastType === 'left') {\n                    lastTarget.style.width = `${lastWidth - lastDiffX}px`;\n                    lastTarget.style.transform = `translate(${lastDiffX}px)`;\n                } else if (lastType === 'right') {\n                    lastTarget.style.width = `${lastWidth + lastDiffX}px`;\n                } else {\n                    lastTarget.style.transform = `translate(${lastDiffX}px)`;\n                }\n            }\n        }, []);\n\n        const onDocumentMouseUp = useCallback(() => {\n            if (isDroging && lastTarget && lastDiffX) {\n                const timeDiff = lastDiffX / gridGap / 10;\n                const index = hasSubtitle(lastSub);\n                const previou = subtitles[index - 1];\n                const next = subtitles[index + 1];\n                const startTime = magnetically(lastSub.startTime + timeDiff, previou ? previou.endTime : 0);\n                const endTime = magnetically(lastSub.endTime + timeDiff, next ? next.startTime : 0);\n                const width = (endTime - startTime) * 10 * gridGap;\n\n                if ((previou && endTime < previou.startTime) || (next && startTime > next.endTime)) {\n                    notify(t('parameter-error'), 'error');\n                } else {\n                    if (lastType === 'left') {\n                        if (startTime >= 0 && startTime < lastSub.endTime) {\n                            const start = secondToTime(startTime);\n                            updateSubtitle(lastSub, 'start', start);\n                            player.seek = startTime;\n                        } else {\n                            lastTarget.style.width = `${width}px`;\n                            notify(t('parameter-error'), 'error');\n                        }\n                    } else if (lastType === 'right') {\n                        if (endTime >= 0 && endTime > lastSub.startTime) {\n                            const end = secondToTime(endTime);\n                            updateSubtitle(lastSub, 'end', end);\n                            player.seek = startTime;\n                        } else {\n                            lastTarget.style.width = `${width}px`;\n                            notify(t('parameter-error'), 'error');\n                        }\n                    } else {\n                        if (startTime > 0 && endTime > 0 && endTime > startTime) {\n                            const start = secondToTime(startTime);\n                            const end = secondToTime(endTime);\n                            updateSubtitle(lastSub, {\n                                start,\n                                end,\n                            });\n                            player.seek = startTime;\n                        } else {\n                            lastTarget.style.width = `${width}px`;\n                            notify(t('parameter-error'), 'error');\n                        }\n                    }\n                }\n\n                lastTarget.style.transform = `translate(0)`;\n            }\n\n            lastType = '';\n            lastX = 0;\n            lastWidth = 0;\n            lastDiffX = 0;\n            isDroging = false;\n        }, [gridGap, hasSubtitle, player, subtitles, updateSubtitle]);\n\n        const onKeyDown = useCallback(\n            (event) => {\n                const sub = currentSubs[lastIndex];\n                if (sub && lastTarget) {\n                    const keyCode = getKeyCode(event);\n                    switch (keyCode) {\n                        case 37:\n                            updateSubtitle(sub, {\n                                start: secondToTime(sub.startTime - 0.1),\n                                end: secondToTime(sub.endTime - 0.1),\n                            });\n                            player.seek = sub.startTime - 0.1;\n                            break;\n                        case 39:\n                            updateSubtitle(sub, {\n                                start: secondToTime(sub.startTime + 0.1),\n                                end: secondToTime(sub.endTime + 0.1),\n                            });\n                            player.seek = sub.startTime + 0.1;\n                            break;\n                        case 8:\n                        case 46:\n                            removeSubtitle(sub);\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            },\n            [currentSubs, player, removeSubtitle, updateSubtitle],\n        );\n\n        useEffect(() => {\n            document.addEventListener('click', onDocumentClick);\n            document.addEventListener('mousemove', onDocumentMouseMove);\n            document.addEventListener('mouseup', onDocumentMouseUp);\n            window.addEventListener('keydown', onKeyDown);\n            return () => {\n                document.removeEventListener('click', onDocumentClick);\n                document.removeEventListener('mousemove', onDocumentMouseMove);\n                document.removeEventListener('mouseup', onDocumentMouseUp);\n                window.removeEventListener('keydown', onKeyDown);\n            };\n        }, [onDocumentClick, onDocumentMouseMove, onDocumentMouseUp, onKeyDown]);\n\n        return (\n            <Block ref={$blockRef}>\n                <div ref={$subsRef}>\n                    {currentSubs.map((sub, key) => {\n                        return (\n                            <div\n                                className={[\n                                    'sub-item',\n                                    key === currentIndex ? 'sub-highlight' : '',\n                                    checkSubtitle(sub) ? 'sub-illegal' : '',\n                                ]\n                                    .join(' ')\n                                    .trim()}\n                                key={key}\n                                style={{\n                                    left: render.padding * gridGap + (sub.startTime - render.beginTime) * gridGap * 10,\n                                    width: (sub.endTime - sub.startTime) * gridGap * 10,\n                                }}\n                                onClick={() => {\n                                    setContextMenu(false);\n                                    if (player.duration >= sub.startTime) {\n                                        player.seek = sub.startTime + 0.001;\n                                    }\n                                }}\n                                onContextMenu={(event) => onContextMenu(sub, event)}\n                            >\n                                <div\n                                    className=\"sub-handle\"\n                                    style={{\n                                        left: 0,\n                                        width: gridGap,\n                                    }}\n                                    onMouseDown={(event) => onMouseDown(sub, event, 'left')}\n                                ></div>\n                                <div className=\"sub-text\" onMouseDown={(event) => onMouseDown(sub, event)}>\n                                    {sub.text.split(/\\r?\\n/).map((line, index) => (\n                                        <p key={index}>{line}</p>\n                                    ))}\n                                </div>\n                                <div\n                                    className=\"sub-handle\"\n                                    style={{\n                                        right: 0,\n                                        width: gridGap,\n                                    }}\n                                    onMouseDown={(event) => onMouseDown(sub, event, 'right')}\n                                ></div>\n                            </div>\n                        );\n                    })}\n                </div>\n                <div\n                    ref={$contextMenuRef}\n                    className=\"contextmenu\"\n                    style={{\n                        visibility: contextMenu ? 'visible' : 'hidden',\n                        left: contextMenuX,\n                        top: contextMenuY,\n                    }}\n                >\n                    <div\n                        className=\"contextmenu-item\"\n                        onClick={() => {\n                            removeSubtitle(lastSub);\n                            setContextMenu(false);\n                        }}\n                    >\n                        <Translate value=\"delete\" />\n                    </div>\n                    <div\n                        className=\"contextmenu-item\"\n                        onClick={() => {\n                            addSubtitle(hasSubtitle(lastSub) + 1);\n                            setContextMenu(false);\n                        }}\n                    >\n                        <Translate value=\"insert\" />\n                    </div>\n                    <div\n                        className=\"contextmenu-item\"\n                        onClick={() => {\n                            mergeSubtitle(lastSub);\n                            setContextMenu(false);\n                        }}\n                    >\n                        <Translate value=\"merge\" />\n                    </div>\n                </div>\n            </Block>\n        );\n    },\n    (prevProps, nextProps) => {\n        return (\n            isEqual(prevProps.subtitles, nextProps.subtitles) &&\n            isEqual(prevProps.render, nextProps.render) &&\n            prevProps.currentTime === nextProps.currentTime\n        );\n    },\n);\n","import React, { useEffect, useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport Sub from '../subtitle/sub';\nimport { secondToTime, getKeyCode } from '../utils';\nimport { t } from 'react-i18nify';\n\nconst Metronome = styled.div`\n    position: absolute;\n    z-index: 8;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    user-select: none;\n\n    .templet {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        height: 100%;\n        background-color: rgba(76, 175, 80, 0.5);\n        border-left: 1px solid rgba(76, 175, 80, 0.8);\n        border-right: 1px solid rgba(76, 175, 80, 0.8);\n        user-select: none;\n        pointer-events: none;\n    }\n`;\n\nfunction findIndex(subs, startTime) {\n    return subs.findIndex((item, index) => {\n        return (\n            (startTime >= item.endTime && !subs[index + 1]) ||\n            (item.startTime <= startTime && item.endTime > startTime) ||\n            (startTime >= item.endTime && subs[index + 1] && startTime < subs[index + 1].startTime)\n        );\n    });\n}\n\nlet isDroging = false;\nexport default function({ render, metronome, currentTime, subtitles, addSubtitle, player, setMetronome }) {\n    const [metronomeStartTime, setMetronomeStartTime] = useState(0);\n    const [drogStartTime, setDrogStartTime] = useState(0);\n    const [drogEndTime, setDrogEndTime] = useState(0);\n\n    const gridGap = document.body.clientWidth / render.gridNum;\n    const $metronomeRef = React.createRef();\n\n    const onKeyDown = useCallback(\n        event => {\n            if (metronome) {\n                const keyCode = getKeyCode(event);\n                if (keyCode === 32) {\n                    event.preventDefault();\n\n                    if (!metronomeStartTime) {\n                        setMetronomeStartTime(currentTime);\n                    }\n\n                    if (metronomeStartTime && metronome && currentTime - metronomeStartTime >= 0.2) {\n                        const index = findIndex(subtitles, metronomeStartTime) + 1;\n                        const start = secondToTime(metronomeStartTime);\n                        const end = secondToTime(currentTime);\n                        addSubtitle(index, new Sub(start, end, t('subtitle-text')));\n                        setMetronomeStartTime(0);\n                    }\n                }\n            }\n        },\n        [addSubtitle, currentTime, metronome, metronomeStartTime, subtitles],\n    );\n\n    const getEventTime = useCallback(\n        event => {\n            return (event.pageX - render.padding * gridGap) / gridGap / 10 + render.beginTime;\n        },\n        [gridGap, render],\n    );\n\n    const onMouseDown = useCallback(\n        event => {\n            const clickTime = getEventTime(event);\n            player.seek = clickTime;\n            isDroging = true;\n            setDrogStartTime(clickTime);\n        },\n        [getEventTime, player],\n    );\n\n    const onMouseMove = useCallback(\n        event => {\n            if (isDroging) {\n                player.pause = true;\n                setDrogEndTime(getEventTime(event));\n            }\n        },\n        [setDrogEndTime, getEventTime, player],\n    );\n\n    const onDocumentMouseUp = useCallback(() => {\n        if (isDroging) {\n            setMetronome(false);\n            setMetronomeStartTime(0);\n            if (drogStartTime && drogEndTime && drogEndTime - drogStartTime >= 0.2) {\n                const index = findIndex(subtitles, drogStartTime) + 1;\n                const start = secondToTime(drogStartTime);\n                const end = secondToTime(drogEndTime);\n                addSubtitle(index, new Sub(start, end, t('subtitle-text')));\n            }\n        }\n        isDroging = false;\n        setDrogStartTime(0);\n        setDrogEndTime(0);\n    }, [addSubtitle, drogEndTime, drogStartTime, setMetronome, subtitles]);\n\n    const onDocumentClick = useCallback(\n        event => {\n            if (event.composedPath) {\n                const composedPath = event.composedPath() || [];\n                if (player.playing && composedPath.includes($metronomeRef.current)) {\n                    setMetronome(true);\n                    isDroging = false;\n                    setDrogStartTime(0);\n                    setDrogEndTime(0);\n                } else {\n                    setMetronome(false);\n                    setMetronomeStartTime(0);\n                }\n            }\n        },\n        [player, $metronomeRef, setMetronome],\n    );\n\n    useEffect(() => {\n        window.addEventListener('keydown', onKeyDown);\n        document.addEventListener('click', onDocumentClick);\n        document.addEventListener('mouseup', onDocumentMouseUp);\n        return () => {\n            window.removeEventListener('keydown', onKeyDown);\n            document.removeEventListener('click', onDocumentClick);\n            document.removeEventListener('mouseup', onDocumentMouseUp);\n        };\n    }, [onKeyDown, onDocumentClick, onDocumentMouseUp]);\n\n    return (\n        <Metronome onMouseDown={onMouseDown} onMouseMove={onMouseMove} ref={$metronomeRef}>\n            {player && player.playing && metronomeStartTime && metronome && currentTime > metronomeStartTime ? (\n                <div\n                    className=\"templet\"\n                    style={{\n                        left: render.padding * gridGap + (metronomeStartTime - render.beginTime) * gridGap * 10,\n                        width: (currentTime - metronomeStartTime) * gridGap * 10,\n                    }}\n                ></div>\n            ) : null}\n            {player && !player.playing && drogStartTime && drogEndTime && drogEndTime > drogStartTime ? (\n                <div\n                    className=\"templet\"\n                    style={{\n                        left: render.padding * gridGap + (drogStartTime - render.beginTime) * gridGap * 10,\n                        width: (drogEndTime - drogStartTime) * gridGap * 10,\n                    }}\n                ></div>\n            ) : null}\n        </Metronome>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport WF from '../waveform';\nimport { sleep } from '../utils';\nimport Block from './Block';\nimport Metronome from './Metronome';\nimport { Translate } from 'react-i18nify';\n\nconst Footer = styled.div`\n    display: flex;\n    flex-direction: column;\n    height: 200px;\n\n    .timeline-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: 35px;\n        font-size: 12px;\n        border-bottom: 1px solid #000;\n        color: rgba(255, 255, 255, 0.5);\n        background-color: rgba(0, 0, 0, 0.3);\n\n        .timeline-header-left {\n            display: flex;\n            align-items: center;\n            height: 100%;\n            .item {\n                display: flex;\n                padding: 0 10px;\n                height: 100%;\n                border-right: 1px solid #000;\n\n                .name {\n                    display: flex;\n                    align-items: center;\n                    margin-right: 10px;\n                }\n\n                .value {\n                    display: flex;\n                    align-items: center;\n\n                    input[type='checkbox'] {\n                        outline: none;\n                    }\n\n                    input[type='range'] {\n                        height: 3px;\n                        width: 100px;\n                        outline: none;\n                        appearance: none;\n                        background-color: rgba(255, 255, 255, 0.2);\n                    }\n\n                    select {\n                        outline: none;\n                    }\n                }\n            }\n        }\n\n        .timeline-header-right {\n            display: flex;\n            align-items: center;\n            height: 100%;\n            padding: 0 15px;\n            border-left: 1px solid #000;\n        }\n    }\n\n    .timeline-body {\n        position: relative;\n        flex: 1;\n\n        .waveform {\n            position: absolute;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            height: 0%;\n            user-select: none;\n            pointer-events: none;\n        }\n    }\n`;\n\nlet wf = null;\nconst Waveform = React.memo(\n    ({ options, player, setDecodeing, setFileSize, setChannelNum, setRender }) => {\n        const $waveform = React.createRef();\n\n        useEffect(() => {\n            if (wf) wf.destroy();\n\n            wf = new WF({\n                container: $waveform.current,\n                mediaElement: player.template.$video,\n                backgroundColor: 'rgb(20, 23, 38)',\n                waveColor: 'rgba(255, 255, 255, 0.1)',\n                progressColor: 'rgba(255, 255, 255, 0.5)',\n                gridColor: 'rgba(255, 255, 255, 0.05)',\n                rulerColor: 'rgba(255, 255, 255, 0.5)',\n            });\n\n            wf.on('render', setRender);\n            wf.on('decodeing', setDecodeing);\n            wf.on('fileSize', setFileSize);\n            wf.on('audiobuffer', audiobuffer => setChannelNum(audiobuffer.numberOfChannels));\n            sleep(1000).then(() => wf.load(options.videoUrl));\n        }, [player, $waveform, options.videoUrl, setDecodeing, setFileSize, setChannelNum, setRender]);\n        return <div className=\"waveform\" ref={$waveform} />;\n    },\n    (prevProps, nextProps) => prevProps.options.videoUrl === nextProps.options.videoUrl,\n);\n\nexport default function(props) {\n    const [decodeing, setDecodeing] = useState(0);\n    const [fileSize, setFileSize] = useState(0);\n    const [channelNum, setChannelNum] = useState(1);\n    const [metronome, setMetronome] = useState(false);\n    const [render, setRender] = useState({\n        padding: 5,\n        duration: 10,\n        gridNum: 110,\n        beginTime: 0,\n    });\n\n    return (\n       <div>\n          {\n              /*\n        <Footer>\n          {/*  <div className=\"timeline-header\">\n                <div className=\"timeline-header-left\">\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"audio-waveform\" />\n                        </div>\n                        <div className=\"value\">\n                            <input\n                                defaultChecked={true}\n                                type=\"checkbox\"\n                                onChange={event => {\n                                    if (!wf) return;\n                                    wf.setOptions({\n                                        wave: event.target.checked,\n                                    });\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"file-size\" />\n                        </div>\n                        <div className=\"value\" style={{ color: '#FF5722' }}>\n                            {((fileSize || 0) / 1024 / 1024).toFixed(2)} M\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"decoding-progress\" />\n                        </div>\n                        <div className=\"value\" style={{ color: '#FF5722' }}>\n                            {((decodeing || 0) * 100).toFixed(2)}%\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"render-channel\" />\n                        </div>\n                        <div className=\"value\">\n                            <select\n                                defaultValue={0}\n                                onChange={event => {\n                                    if (!wf) return;\n                                    wf.changeChannel(Number(event.target.value || 0));\n                                }}\n                            >\n                                {Array(channelNum)\n                                    .fill()\n                                    .map((_, index) => (\n                                        <option key={index} value={index}>\n                                            {index + 1}\n                                        </option>\n                                    ))}\n                            </select>\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"unit-duration\" />\n                        </div>\n                        <div className=\"value\">\n                            <input\n                                defaultValue=\"10\"\n                                type=\"range\"\n                                min=\"5\"\n                                max=\"20\"\n                                step=\"1\"\n                                onChange={event => {\n                                    if (!wf) return;\n                                    wf.setOptions({\n                                        duration: Number(event.target.value || 10),\n                                    });\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"height-zoom\" />\n                        </div>\n                        <div className=\"value\">\n                            <input\n                                defaultValue=\"1\"\n                                type=\"range\"\n                                min=\"0.1\"\n                                max=\"10\"\n                                step=\"0.5\"\n                                onChange={event => {\n                                    if (!wf) return;\n                                    wf.setOptions({\n                                        waveScale: Number(event.target.value || 1),\n                                    });\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div className=\"name\">\n                            <Translate value=\"space-metronome\" />\n                        </div>\n                        <div className=\"value\">\n                            {metronome ? (\n                                <span style={{ color: '#4CAF50' }}>ON</span>\n                            ) : (\n                                <span style={{ color: '#FF5722' }}>OFF</span>\n                            )}\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <div\n                            style={{ cursor: 'pointer' }}\n                            className=\"value\"\n                            onClick={() => {\n                                if (!wf) return;\n                                wf.exportImage();\n                            }}\n                        >\n                            <Translate value=\"export-image\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"timeline-body\">\n                {props.player ? (\n                    <Waveform\n                        {...props}\n                        setDecodeing={setDecodeing}\n                        setFileSize={setFileSize}\n                        setChannelNum={setChannelNum}\n                        setRender={setRender}\n                    />\n                ) : null}\n                <Metronome {...props} render={render} metronome={metronome} setMetronome={setMetronome} />\n                <Block {...props} render={render} />\n            </div> \n        </Footer>\n        */}\n        </div>\n    );\n}\n","export default class Storage {\n    constructor() {\n        this.name = 'subplayer_settings';\n    }\n\n    get(key) {\n        const storage = JSON.parse(window.localStorage.getItem(this.name)) || {};\n        return key ? storage[key] : storage;\n    }\n\n    set(key, value) {\n        const storage = Object.assign({}, this.get(), {\n            [key]: value,\n        });\n        window.localStorage.setItem(this.name, JSON.stringify(storage));\n    }\n\n    del(key) {\n        const storage = this.get();\n        delete storage[key];\n        window.localStorage.setItem(this.name, JSON.stringify(storage));\n    }\n\n    clean() {\n        window.localStorage.removeItem(this.name);\n    }\n}\n","import NProgress from 'nprogress';\nimport pLimit from 'p-limit';\nimport { sleep, notify } from '../utils/index';\n\nexport function googleTranslate(query = '', lang) {\n    if (!query.trim()) return Promise.resolve('');\n    const url = new URL('https://translate.googleapis.com/translate_a/single');\n    url.searchParams.append('client', 'gtx');\n    url.searchParams.append('sl', 'auto');\n    url.searchParams.append('dt', 't');\n    url.searchParams.append('tl', lang);\n    url.searchParams.append('q', query);\n\n    return new Promise(resolve => {\n        sleep().then(async () => {\n            fetch(url.href)\n                .then(data => data.json())\n                .then(data => {\n                    if (data) {\n                        resolve(data[0].map(item => item[0].trim()).join('\\n'));\n                    } else {\n                        resolve('');\n                    }\n                })\n                .catch(error => {\n                    notify(error.message, 'error');\n                    resolve('');\n                });\n        });\n    });\n}\n\nexport default async function translate(subtitles, lang) {\n    NProgress.start();\n    const limit = pLimit(1);\n    let index = 0;\n\n    try {\n        const result = await Promise.all(\n            subtitles.map(item =>\n                limit(async () => {\n                    const data = await googleTranslate(item.text, lang);\n                    NProgress.set(++index / subtitles.length);\n                    if (data) {\n                        item.text = data;\n                    }\n                    return item;\n                }),\n            ),\n        );\n        NProgress.done();\n        return result;\n    } catch (error) {\n        NProgress.done();\n        notify(error.message, 'error');\n    }\n}\n","import React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport GlobalStyle from './GlobalStyle';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport Sub from '../subtitle/sub';\nimport clamp from 'lodash/clamp';\nimport { secondToTime, notify } from '../utils';\nimport { getSubFromVttUrl, vttToUrlUseWorker } from '../subtitle';\nimport Storage from '../utils/storage';\nimport isEqual from 'lodash/isEqual';\nimport NProgress from 'nprogress';\nimport { ToastContainer } from 'react-toastify';\nimport translate, { googleTranslate } from '../translate';\nimport { t, setLocale } from 'react-i18nify';\n\nconst history = [];\nlet inTranslation = false;\nconst storage = new Storage();\nconst worker = new Worker(vttToUrlUseWorker());\n\nexport default function() {\n    // Player instance\n    const [player, setPlayer] = useState(null);\n\n    // Language\n    const defaultLang = storage.get('language') || navigator.language.toLowerCase() || 'en';\n    const [language, setLanguage] = useState(defaultLang);\n\n    // Subtitle currently playing index\n    const [currentIndex, setCurrentIndex] = useState(-1);\n\n    // Subtitle currently playing time\n    const [currentTime, setCurrentTime] = useState(0);\n\n    // All subtitles\n    const [subtitles, setSubtitles] = useState([]);\n    const [refe_subtitles, refe_setSubtitles] = useState([]);\n\n    // All options\n    const [options, setOptions] = useState({\n        videoUrl: '/sample.mp4',\n        subtitleUrl: '/sample.vtt',\n        helpDialog: false,\n        donateDialog: false,\n        uploadDialog: false,\n        translationLanguage: 'en',\n    });\n\n    // Update language\n    const updateLang = useCallback(\n        value => {\n            setLocale(value);\n            setLanguage(value);\n            storage.set('language', value);\n        },\n        [setLanguage],\n    );\n\n    // Update an option\n    const setOption = useCallback(\n        option => {\n            setOptions({\n                ...options,\n                ...option,\n            });\n        },\n        [options, setOptions],\n    );\n\n    // Only way to update all subtitles\n    const updateSubtitles = useCallback(\n        (subs, saveToHistory = true) => {\n            if (subs.length && !isEqual(subs, subtitles)) {\n                setSubtitles(subs);\n\n                // Save 100 subtitles to history\n                if (saveToHistory) {\n                    if (history.length >= 100) {\n                        history.shift();\n                    }\n                    history.push(subs.map(sub => sub.clone));\n                }\n\n                // Save to storage\n                storage.set('subtitles', subs);\n               \n                // Convert subtitles to vtt url\n                worker.postMessage(subs);\n            }\n        },\n        [setSubtitles, subtitles],\n    );\n\n    // Initialize subtitles from url or storage\n    const initSubtitles = useCallback(async () => {\n        console.log(\"this check\")\n        const storageSubs = storage.get('subtitles');\n        if (storageSubs && storageSubs.length) {\n            updateSubtitles(storageSubs.map(item => new Sub(item.start, item.end, item.text,item.text2)));\n        } else {\n            const subs = await getSubFromVttUrl(options.subtitleUrl);\n            updateSubtitles(subs);\n        }\n    }, [options.subtitleUrl, setSubtitles]);\n\n    const initrefeSubtitles = useCallback(async () => {\n      \n            const subs = await getSubFromVttUrl(options.subtitleUrl);\n            updateSubtitles(subs);\n      \n    }, [options.subtitleUrl, refe_setSubtitles]);\n\n    // Run only once\n    useEffect(() => {\n        initSubtitles();\n        updateLang(language);\n        if (player && !worker.onmessage) {\n            worker.onmessage = event => {\n                player.subtitle.switch(event.data);\n            };\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [player]);\n\n    // Update current index from current time\n    useMemo(() => {\n        setCurrentIndex(subtitles.findIndex(item => item.startTime <= currentTime && item.endTime > currentTime));\n    }, [subtitles, currentTime, setCurrentIndex]);\n\n    // Detect if the subtitle exists\n    const hasSubtitle = useCallback(sub => subtitles.indexOf(sub), [subtitles]);\n\n    // Copy all subtitles\n    const copySubtitles = useCallback(() => subtitles.map(sub => sub.clone), [subtitles]);\n\n    // Check if subtitle is legal\n    const checkSubtitle = useCallback(\n        sub => {\n            const index = hasSubtitle(sub);\n            if (index < 0) return;\n            const previous = subtitles[index - 1];\n            return (previous && sub.startTime < previous.endTime) || !sub.check;\n        },\n        [hasSubtitle, subtitles],\n    );\n\n    // Update a single subtitle\n    const updateSubtitle = useCallback(\n        (sub, key, value) => {\n            const index = hasSubtitle(sub);\n            if (index < 0) return;\n            const subs = copySubtitles();\n            const { clone } = sub;\n            if (typeof key === 'object') {\n                Object.assign(clone, key);\n            } else {\n                clone[key] = value;\n            }\n            if (clone.check) {\n                subs[index] = clone;\n                updateSubtitles(subs);\n            } else {\n                notify(t('parameter-error'), 'error');\n            }\n            \n        },\n        [hasSubtitle, copySubtitles, updateSubtitles],\n    );\n\n    // Delete a subtitle\n    const removeSubtitle = useCallback(\n        sub => {\n            const index = hasSubtitle(sub);\n            if (index < 0) return;\n            const subs = copySubtitles();\n            if (subs.length === 1) {\n                return notify(t('keep-one'), 'error');\n            }\n            subs.splice(index, 1);\n            updateSubtitles(subs);\n        },\n        [hasSubtitle, copySubtitles, updateSubtitles],\n    );\n\n    // Add a subtitle\n    const addSubtitle = useCallback(\n        (index, sub) => {\n            const subs = copySubtitles();\n            if (sub) {\n                subs.splice(index, 0, sub);\n            } else {\n                const previous = subs[index - 1];\n                const start = previous ? secondToTime(previous.endTime + 0.1) : '00:00:00.001';\n                const end = previous ? secondToTime(previous.endTime + 1.1) : '00:00:01.001';\n                const sub = new Sub(start, end, t('subtitle-text'));\n                subs.splice(index, 0, sub);\n            }\n            updateSubtitles(subs);\n        },\n        [copySubtitles, updateSubtitles],\n    );\n\n    // Merge two subtitles\n    const mergeSubtitle = useCallback(\n        sub => {\n            const index = hasSubtitle(sub);\n            if (index < 0) return;\n            const subs = copySubtitles();\n            const next = subs[index + 1];\n            if (!hasSubtitle(next)) return;\n            const merge = new Sub(sub.start, next.end, sub.text + '\\n' + next.text);\n            subs[index] = merge;\n            subs.splice(index + 1, 1);\n            updateSubtitles(subs);\n        },\n        [hasSubtitle, copySubtitles, updateSubtitles],\n    );\n\n    // Remove all subtitles\n    const removeSubtitles = useCallback(() => {\n        updateSubtitles([new Sub('00:00:00.000', '00:00:01.000', t('subtitle-text'))]);\n    }, [updateSubtitles]);\n\n    // Undo subtitles\n    const undoSubtitles = useCallback(() => {\n        if (history.length > 1) {\n            history.pop();\n            const subs = history[history.length - 1];\n            updateSubtitles(subs, false);\n            notify(t('history-rollback'));\n        } else {\n            notify(t('history-empty'), 'error');\n        }\n    }, [updateSubtitles]);\n\n    // Subtitle time offset\n    const timeOffsetSubtitles = useCallback(\n        time => {\n            const subs = copySubtitles();\n            updateSubtitles(\n                subs.map(item => {\n                    item.start = secondToTime(clamp(item.startTime + time, 0, Infinity));\n                    item.end = secondToTime(clamp(item.endTime + time, 0, Infinity));\n                    return item;\n                }),\n            );\n            notify(`${t('time-offset')} ${time * 1000}ms`);\n        },\n        [copySubtitles, updateSubtitles],\n    );\n\n    // Clean all subtitles\n    const cleanSubtitles = useCallback(() => {\n        history.length = 0;\n        storage.set('subtitles', []);\n        removeSubtitles();\n        player.seek = 0;\n        notify(t('clear-success'));\n    }, [player, removeSubtitles]);\n\n    // Translate a subtitle\n    const translateSubtitle = useCallback(\n        async sub => {\n            if (!inTranslation) {\n                const index = hasSubtitle(sub);\n                if (index < 0) return;\n                try {\n                    inTranslation = true;\n                    NProgress.start().set(0.5);\n                    const text = await googleTranslate(sub.text, options.translationLanguage);\n                    if (text) {\n                        updateSubtitle(sub, 'text', text);\n                        notify(t('translation-success'));\n                    }\n                    inTranslation = false;\n                    NProgress.done();\n                } catch (error) {\n                    notify(error.message, 'error');\n                    inTranslation = false;\n                    NProgress.done();\n                }\n            } else {\n                notify(t('translation-progress'), 'error');\n            }\n        },\n        [hasSubtitle, updateSubtitle, options.translationLanguage],\n    );\n\n    // Translate all subtitles\n    const translateSubtitles = useCallback(async () => {\n        if (!inTranslation) {\n            const subs = copySubtitles();\n            if (subs.length && subs.length <= 1000) {\n                inTranslation = true;\n                try {\n                    updateSubtitles(await translate(subs, options.translationLanguage));\n                    notify(t('translation-success'));\n                    inTranslation = false;\n                } catch (error) {\n                    notify(error.message, 'error');\n                    inTranslation = false;\n                }\n            } else {\n                notify(t('translation-limit'), 'error');\n            }\n        } else {\n            notify(t('translation-progress'), 'error');\n        }\n    }, [copySubtitles, updateSubtitles, options.translationLanguage]);\n\n    const props = {\n        player,\n        options,\n        language,\n        subtitles,\n        currentTime,\n        currentIndex,\n        refe_subtitles,\n\n        setOption,\n        setPlayer,\n        setCurrentTime,\n        setCurrentIndex,\n\n        updateLang,\n        hasSubtitle,\n        addSubtitle,\n        checkSubtitle,\n        undoSubtitles,\n        mergeSubtitle,\n        removeSubtitle,\n        updateSubtitle,\n        cleanSubtitles,\n        updateSubtitles,\n        removeSubtitles,\n        translateSubtitle,\n        translateSubtitles,\n        timeOffsetSubtitles,\n    };\n\n    return (\n        <React.Fragment>\n            <GlobalStyle />\n            <Header {...props} />\n            <Main {...props} />\n          {\n          //  <Footer {...props} />\n}\n            <ToastContainer />\n        </React.Fragment>\n    );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport NProgress from 'nprogress';\nimport * as serviceWorker from './serviceWorker';\nimport { isMobile } from './utils';\nimport { setTranslations } from 'react-i18nify';\nimport i18n from './i18n';\nimport 'normalize.css';\nimport './fontello/css/fontello.css';\nimport 'nprogress/nprogress.css';\nimport 'react-virtualized/styles.css';\nimport 'react-toastify/dist/ReactToastify.css';\n\nsetTranslations(i18n);\nNProgress.configure({ minimum: 0, showSpinner: false });\nReactDOM.render(isMobile() ? 'SubPlayer does not support mobile access' : <App />, document.getElementById('root'));\nserviceWorker.unregister();\n"],"sourceRoot":""}