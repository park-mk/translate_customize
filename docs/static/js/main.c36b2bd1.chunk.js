(this.webpackJsonpsubplayer=this.webpackJsonpsubplayer||[]).push([[0],{147:function(e,t,n){e.exports=n(302)},163:function(e,t){},298:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(20),o=n.n(i),l=n(12),c=n.n(l),s=n(16),u=n(99),p=n(22),d=n(13),f=n(14);function m(){var e=Object(d.a)(["\n    html,\n    body,\n    #root {\n        height: 100%;\n    }\n\n    body {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;\n        line-height: 1.5;\n        overflow: hidden;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        color: #ccc;\n        background: #1c1f2f;\n    }\n\n    ::-webkit-scrollbar {\n        width: 5px;\n    }\n\n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n\n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n"]);return m=function(){return e},e}var b=Object(f.a)(m()),g={open:"\u6253\u5f00",save:"\u4fdd\u5b58",undo:"\u56de\u9000",clear:"\u6e05\u9664",help:"\u5e2e\u52a9",donate:"\u6350\u52a9",confirm:"\u786e\u5b9a",delete:"\u5220\u9664",insert:"\u63d2\u5165\u4e0b\u4e00\u6761",merge:"\u5408\u5e76\u4e0b\u4e00\u6761","open-subtitle":"\u6253\u5f00\u5b57\u5e55","open-subtitle-supports":"\u652f\u6301\u6253\u5f00 .vtt, .srt \u548c .ass \u5b57\u5e55","open-subtitle-success":"\u6253\u5f00\u5b57\u5e55\u6210\u529f","open-subtitle-error":"\u6253\u5f00\u5b57\u5e55\u5931\u8d25","open-video":"\u6253\u5f00\u89c6\u9891","open-video-supports":"\u652f\u6301\u6253\u5f00 .mp4, .webm \u548c .ogg \u89c6\u9891","open-video-warning":"\u6587\u4ef6\u5747\u4e3a\u672c\u5730\u6253\u5f00\uff0c\u4e0d\u4f1a\u4e0a\u4f20\u4efb\u4f55\u6570\u636e\u3002\u521b\u5efa\u97f3\u9891\u6ce2\u5f62\u65f6\uff0c\u6d4f\u89c8\u5668\u53ef\u80fd\u4f1a\u7531\u4e8e\u97f3\u9891\u89e3\u7801\u800c\u5728\u77ed\u65f6\u95f4\u5185\u88ab\u963b\u585e","open-video-success":"\u6253\u5f00\u89c6\u9891\u6210\u529f","open-video-error":"\u6253\u5f00\u89c6\u9891\u5931\u8d25","clear-warning":"\u6b64\u6b65\u9aa4\u65e0\u6cd5\u56de\u9000\uff0c\u786e\u5b9a\u5417?","clear-success":"\u6e05\u9664\u6240\u6709\u5b57\u5e55\u6570\u636e\u6210\u529f","help-info":"\u8be5\u7f16\u8f91\u5668\u9002\u7528\u4e8e\u4f53\u79ef\u5c0f\uff0c\u5b57\u5e55\u6548\u679c\u7b80\u5355\u7684\u89c6\u9891\u3002\u5bf9\u4e8e\u5927\u6587\u4ef6\u89c6\u9891\u6216\u66f4\u591a\u5b57\u5e55\u6548\u679c\uff0c\u8bf7\u4f7f\u7528\u4e13\u4e1a\u7684\u684c\u9762\u8f6f\u4ef6\u3002","help-issue":"\u60a8\u53ef\u4ee5\u5728Github\u95ee\u9898\u4e0a\u63d0\u51fa\u4efb\u4f55\u95ee\u9898:","help-email":"\u6216\u901a\u8fc7\u7535\u5b50\u90ae\u4ef6\u4e0e\u6211\u8054\u7cfb:","donate-info":"\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u7ed9\u6211\u4e70\u676f\u5496\u5561\uff0c\u4ee5\u9f13\u52b1\u6211\u7ee7\u7eed\u66f4\u65b0\u548c\u6539\u8fdb\u5b57\u5e55\u7f16\u8f91\u5668\u3002","donate-weChatPay":"\u5fae\u4fe1\u652f\u4ed8:","donate-alipay":"\u652f\u4ed8\u5b9d:","history-rollback":"\u5386\u53f2\u56de\u9000\u6210\u529f","history-empty":"\u5386\u53f2\u662f\u7a7a\u7684","translation-success":"\u7ffb\u8bd1\u6210\u529f","translation-progress":"\u7ffb\u8bd1\u6b63\u5728\u8fdb\u884c","translation-limit":"\u6bcf\u6b64\u9650\u52361000\u6761\u7ffb\u8bd1","audio-waveform":"\u6ce2\u5f62\u56fe:","file-size":"\u6587\u4ef6\u5927\u5c0f:","decoding-progress":"\u89e3\u7801\u8fdb\u5ea6:","render-channel":"\u6e32\u67d3\u58f0\u9053:","unit-duration":"\u5355\u4f4d\u65f6\u957f:","height-zoom":"\u9ad8\u5ea6\u7f29\u653e:","space-metronome":"\u7a7a\u683c\u8282\u62cd\u5668:","export-image":"\u5bfc\u51fa\u56fe\u50cf","parameter-error":"\u53c2\u6570\u9519\u8bef","keep-one":"\u8bf7\u81f3\u5c11\u4fdd\u7559\u4e00\u4e2a\u5b57\u5e55","subtitle-text":"[\u5b57\u5e55\u6587\u5b57]","time-offset":"\u65f6\u95f4\u504f\u79fb:","google-translate":"\u8c37\u6b4c\u7ffb\u8bd1:"},h={en:{open:"Open",save:"Save",undo:"Undo",clear:"Clear",help:"Help",donate:"Donate",confirm:"Confirm",delete:"Delete",insert:"Insert Next",merge:"Merge Next","open-subtitle":"Open Subtitle","open-subtitle-supports":"Supports opening .vtt, .srt and .ass subtitle","open-subtitle-success":"Open subtitles successfully","open-subtitle-error":"Failed to open subtitles","open-video":"Open Video","open-video-supports":"Supports opening .mp4, .webm and .ogg video","open-video-warning":"The files are opened locally and no data is uploaded. When creating an audio waveform, The browser may be blocked for a short time due to audio decoding","open-video-success":"Open video successfully","open-video-error":"Failed to open video","clear-warning":"This step cannot be rolled back. Are you sure ?","clear-success":"Clear all subtitles data successfully","help-info":"This editor is suitable for video with small volume and simple subtitle effect. For large file videos or more subtitle effect, please use professional desktop software.","help-issue":"You can ask any questions on Github Issue:","help-email":"Or contact me via email:","donate-info":"Or you can buy me a cup of coffee to encourage me to continue to update and improve the subtitle editor.","donate-weChatPay":"WeChat Pay:","donate-alipay":"Alipay:","history-rollback":"History rollback successful","history-empty":"History is empty","translation-success":"Translation successful","translation-progress":"Translation in progress","translation-limit":"Limit 1000 translations per batch","audio-waveform":"Audio Waveform:","file-size":"File Size:","decoding-progress":"Decoding Progress:","render-channel":"Render Channel:","unit-duration":"Unit Duration:","height-zoom":"Height Zoom:","space-metronome":"Space Metronome:","export-image":"Export Image","parameter-error":"Parameter error","keep-one":"Please keep at least one subtitle","subtitle-text":"[Subtitle Text]","time-offset":"Time Offset:","google-translate":"Google Translate:"},zh:g,"zh-cn":g,"zh-tw":g},v=n(17),x=n.n(v),w=n(101),y=n.n(w),O=n(98);function j(e){return e.includes("?")?j(e.split("?")[0]):e.includes("#")?j(e.split("#")[0]):e.trim().toLowerCase().split(".").pop()}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return y.a.d2t(e.toFixed(3))}function T(e){return y.a.t2d(e)}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";return e.trim()&&O.a[t](e,{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}var S=n(69),N=n(70),z=n(34),D=n.n(z),P=function(){function e(t,n,a){Object(S.a)(this,e),this.start=t,this.end=n,this.text=a}return Object(N.a)(e,[{key:"check",get:function(){return this.startTime>=0&&this.endTime>=0&&this.startTime<this.endTime}},{key:"clone",get:function(){return new e(this.start,this.end,this.text)}},{key:"startTime",get:function(){return T(this.start)},set:function(e){this.start=E(D()(e,0,1/0))}},{key:"endTime",get:function(){return T(this.end)},set:function(e){this.end=E(D()(e,0,1/0))}},{key:"duration",get:function(){return(this.endTime-this.startTime).toFixed(3)}}]),e}();function U(e){return e instanceof File}function L(e){return U(e)?j(e.name):j(e)}function R(e){return I.apply(this,arguments)}function I(){return(I=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U(t)){e.next=6;break}return e.next=3,M(t);case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,$(t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}function M(e){return W.apply(this,arguments)}function W(){return(W=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new FileReader;n.onload=function(){switch(L(t)){case"vtt":e(n.result.replace(/{[\s\S]*?}/g,""));break;case"ass":e(A(n.result));break;case"srt":e(F(n.result));break;default:e()}},n.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return _.apply(this,arguments)}function _(){return(_=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.text();case 5:r=e.sent,e.t0=L(t),e.next="vtt"===e.t0?9:"ass"===e.t0?11:"srt"===e.t0?13:15;break;case 9:return n(r.replace(/{[\s\S]*?}/g,"")),e.abrupt("break",17);case 11:return n(A(r)),e.abrupt("break",17);case 13:return n(F(r)),e.abrupt("break",17);case 15:return n(),e.abrupt("break",17);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){var t=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(/[:.]/).map((function(e,t,n){if(t===n.length-1){if(1===e.length)return"."+e+"00";if(2===e.length)return"."+e+"0"}else if(1===e.length)return(0===t?"0":":0")+e;return 0===t?e:t===n.length-1?"."+e:":"+e})).join("")}return"WEBVTT\n\n"+e.split(/\r?\n/).map((function(e){var a=e.match(t);return a?{start:n(a[1].trim()),end:n(a[2].trim()),text:a[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,"\n").trim().split(/\r?\n/).map((function(e){return e.trim()})).join("\n")}:null})).filter((function(e){return e})).map((function(e,t){return e?t+1+"\n"+e.start+" --\x3e "+e.end+"\n"+e.text:""})).filter((function(e){return e.trim()})).join("\n\n")}function F(e){return"WEBVTT \r\n\r\n".concat(e.replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat("\r\n\r\n"))}function H(e){return V.apply(this,arguments)}function V(){return(V=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=document.createElement("video"),a=document.createElement("track");a.default=!0,a.kind="metadata",n.appendChild(a),a.onload=function(){e(Array.from(a.track.cues).map((function(e){var t=E(e.startTime),n=E(e.endTime),a=e.text;return new P(t,n,a)})))},a.src=t})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=n(2);function J(){var e=Object(d.a)(["\n    .item {\n        margin-bottom: 20px;\n        .title {\n            color: #fff;\n            font-size: 14px;\n            padding: 5px 10px;\n            margin-bottom: 10px;\n            border-left: 2px solid #03a9f4;\n        }\n        .centent {\n            padding: 0 10px;\n            .upload {\n                position: relative;\n                margin-bottom: 10px;\n                .input {\n                    width: 100%;\n                    height: 30px;\n                    line-height: 30px;\n                    padding: 0 10px;\n                    outline: none;\n                    border: none;\n                    color: #fff;\n                    background-color: #363952;\n                }\n                .file {\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    bottom: 0;\n                    line-height: 1;\n                    height: 100%;\n                    width: 100px;\n                    color: #fff;\n                    background-color: #2196f3;\n\n                    input {\n                        position: absolute;\n                        left: 0;\n                        top: 0;\n                        right: 0;\n                        bottom: 0;\n                        width: 100%;\n                        height: 100%;\n                        opacity: 0;\n                    }\n                }\n            }\n            .info {\n                font-size: 12px;\n                color: rgba(255, 255, 255, 0.5);\n                margin-bottom: 10px;\n            }\n            .warning {\n                font-size: 12px;\n                padding: 5px;\n                color: #fff;\n                background-color: rgba(199, 81, 35, 0.5);\n                border: 1px solid rgba(199, 81, 35, 1);\n            }\n        }\n    }\n"]);return J=function(){return e},e}var q=f.b.div(J()),X=function(e){var t=e.player,n=e.options,a=e.setOption,i=e.updateSubtitles;function o(e){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(c.a.mark((function e(n){var r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=25;break}return x.a.start().set(.5),e.prev=2,e.next=5,R(n);case 5:if(!(r=e.sent)){e.next=18;break}return o=B(r),e.t0=i,e.next=11,H(o);case 11:e.t1=e.sent,(0,e.t0)(e.t1),t.subtitle.switch(o),a({subtitleUrl:o,uploadDialog:!1}),C(Object(G.t)("open-subtitle-success")),e.next=19;break;case 18:C(Object(G.t)("open-subtitle-error"),"error");case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(2),C(e.t2.message,"error");case 24:x.a.done();case 25:case"end":return e.stop()}}),e,null,[[2,21]])})))).apply(this,arguments)}function u(e){if(e){if(x.a.start().set(.5),"string"===typeof e)t.url=e,a({videoUrl:e,uploadDialog:!1}),C(Object(G.t)("open-video-success"));else{var n=document.createElement("video").canPlayType(e.type);if("maybe"===n||"probably"===n){var r=URL.createObjectURL(e);t.url=r,a({videoUrl:r,uploadDialog:!1}),C(Object(G.t)("open-video-success"))}else C(Object(G.t)("open-video-error"),"error")}x.a.done()}}return r.a.createElement(q,null,r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"title"},r.a.createElement(G.Translate,{value:"open-subtitle"})),r.a.createElement("div",{className:"centent"},r.a.createElement("div",{className:"upload"},r.a.createElement("input",{disabled:!0,value:n.subtitleUrl,type:"text",className:"input",spellCheck:"false",onChange:function(e){return o(e.target.value)}}),r.a.createElement("div",{className:"file"},r.a.createElement(G.Translate,{value:"open"}),r.a.createElement("input",{type:"file",onChange:function(e){return o(e.target.files[0])}}))),r.a.createElement("div",{className:"info"},r.a.createElement(G.Translate,{value:"open-subtitle-supports"})))),r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"title"},r.a.createElement(G.Translate,{value:"open-video"})),r.a.createElement("div",{className:"centent"},r.a.createElement("div",{className:"upload"},r.a.createElement("input",{disabled:!0,value:n.videoUrl,type:"text",className:"input",spellCheck:"false",onChange:function(e){return u(e.target.value)}}),r.a.createElement("div",{className:"file"},r.a.createElement(G.Translate,{value:"open"}),r.a.createElement("input",{type:"file",onChange:function(e){return u(e.target.files[0])}}))),r.a.createElement("div",{className:"info"},r.a.createElement(G.Translate,{value:"open-video-supports"})),r.a.createElement("div",{className:"warning"},r.a.createElement(G.Translate,{value:"open-video-warning"})))))};function Y(){var e=Object(d.a)(["\n    position: relative;\n    padding: 0 20px 20px;\n    font-size: 14px;\n\n    a {\n        color: #2196f3;\n    }\n"]);return Y=function(){return e},e}var Z=f.b.div(Y()),K=function(){return r.a.createElement(Z,null,r.a.createElement("p",null,r.a.createElement(G.Translate,{value:"help-info"})),r.a.createElement("p",null,r.a.createElement(G.Translate,{value:"help-issue"})),r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/zhw2590582/SubPlayer/issues"},"https://github.com/zhw2590582/SubPlayer/issues")),r.a.createElement("p",null,r.a.createElement(G.Translate,{value:"help-email"})),r.a.createElement("p",null,r.a.createElement("a",{href:"mailto:laozhaochaguan@gmail.com"},"laozhaochaguan@gmail.com")))};function Q(){var e=Object(d.a)(["\n    position: relative;\n    padding: 0 20px 20px;\n    font-size: 14px;\n\n    a {\n        color: #2196f3;\n    }\n"]);return Q=function(){return e},e}var ee=f.b.div(Q()),te=function(){return r.a.createElement(ee,null,r.a.createElement("p",null,r.a.createElement(G.Translate,{value:"donate-info"})),r.a.createElement("p",null,"Paypal:"),r.a.createElement("p",null,r.a.createElement("a",{href:"https://www.paypal.me/harveyzack"},"https://www.paypal.me/harveyzack")),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(G.Translate,{value:"donate-weChatPay"})),r.a.createElement("p",null,r.a.createElement("img",{style:{width:210},src:"/wechatpay.jpg",alt:"WeChat Pay"}))),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(G.Translate,{value:"donate-alipay"})),r.a.createElement("p",null,r.a.createElement("img",{style:{width:210},src:"/alipay.jpg",alt:"Alipay"})))))};function ne(){var e=Object(d.a)(["\n    position: fixed;\n    z-index: 99;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: rgba(0, 0, 0, 0.8);\n\n    .dialog-inner {\n        min-height: 0px;\n        background-color: #1f2133;\n        border-radius: 3px;\n        overflow: hidden;\n        opacity: 0;\n        margin-top: -10px;\n        transition: all 0.2s ease 0s;\n        box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.5);\n\n        .dialog-title {\n            position: relative;\n            border-bottom: 1px solid #000;\n            background-color: #2a2c3c;\n            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n            color: #fff;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 10px 0;\n            margin-bottom: 10px;\n            font-size: 16px;\n        }\n\n        .dialog-cancel {\n            position: absolute;\n            right: 10px;\n            top: 10px;\n            cursor: pointer;\n            opacity: 0.5;\n            transition: all 0.2s ease 0s;\n\n            &:hover {\n                opacity: 1;\n            }\n        }\n\n        &.dialog-active {\n            opacity: 1;\n            margin-top: 0;\n        }\n    }\n"]);return ne=function(){return e},e}var ae=f.b.div(ne()),re=function(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),i=n[0],o=n[1];return Object(a.useEffect)((function(){setTimeout((function(){return o("dialog-active")}),100)}),[]),r.a.createElement(ae,{onClick:function(){return e.onClose()}},r.a.createElement("div",{style:{width:e.width||500},className:"dialog-inner ".concat(i),onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"dialog-title"},e.title||"Title"," ",r.a.createElement("i",{className:"dialog-cancel icon-cancel",onClick:function(){return e.onClose()}})),r.a.createElement("div",{className:"dialog-content"},e.children)))};function ie(){var e=Object(d.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 13px;\n    height: 100%;\n    padding: 0 10px;\n    color: rgba(255, 255, 255, 1);\n    border-left: 1px solid rgb(0, 0, 0);\n    background-color: rgb(26, 83, 109);\n\n    i {\n        margin-right: 5px;\n    }\n\n    select {\n        outline: none;\n    }\n"]);return ie=function(){return e},e}function oe(){var e=Object(d.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 13px;\n    height: 100%;\n    cursor: pointer;\n    padding: 0 25px;\n    color: rgba(255, 255, 255, 1);\n    transition: all 0.2s ease 0s;\n    border-right: 1px solid rgb(0, 0, 0);\n    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n\n    &:hover {\n        background-color: #2196f3;\n    }\n\n    i {\n        margin-right: 5px;\n    }\n"]);return oe=function(){return e},e}function le(){var e=Object(d.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 22px;\n    height: 100%;\n    cursor: pointer;\n    padding: 0 15px;\n    color: rgba(255, 255, 255, 1);\n    transition: all 0.2s ease 0s;\n    border-right: 1px solid rgb(0, 0, 0);\n    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n    text-decoration: none;\n\n    &:hover {\n        background-color: #2196f3;\n    }\n"]);return le=function(){return e},e}function ce(){var e=Object(d.a)(["\n    display: flex;\n    align-items: center;\n    height: 100%;\n"]);return ce=function(){return e},e}function se(){var e=Object(d.a)(["\n    display: flex;\n    align-items: center;\n    height: 100%;\n"]);return se=function(){return e},e}function ue(){var e=Object(d.a)(["\n    position: relative;\n    display: flex;\n    height: 50px;\n    align-items: center;\n    justify-content: space-between;\n    background-color: #1f2133;\n    border-bottom: 1px solid rgb(0, 0, 0);\n"]);return ue=function(){return e},e}var pe=f.b.div(ue()),de=f.b.div(se()),fe=f.b.div(ce()),me=f.b.a(le()),be=f.b.div(oe()),ge=(f.b.div(ie()),function(e){return r.a.createElement(pe,null,r.a.createElement(de,null,r.a.createElement(me,{href:"/"},r.a.createElement("i",{className:"icon-cc"})),r.a.createElement(be,{onClick:function(){return e.setOption({uploadDialog:!0})}},r.a.createElement("i",{className:"icon-upload"}),r.a.createElement(G.Translate,{value:"open"})),r.a.createElement(be,{onClick:function(){return function(e,t){var n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}(B("WEBVTT\n\n"+e.subtitles.map((function(e,t){return t+1+"\n"+e.start+" --\x3e "+e.end+"\n"+e.text})).join("\n\n")),"".concat(Date.now(),".vtt"))}},r.a.createElement("i",{className:"icon-download"}),r.a.createElement(G.Translate,{value:"save"})),r.a.createElement(be,{onClick:function(){return e.undoSubtitles()}},r.a.createElement("i",{className:"icon-ccw"}),r.a.createElement(G.Translate,{value:"undo"})),r.a.createElement(be,{onClick:function(){window.confirm(Object(G.t)("clear-warning"))&&e.cleanSubtitles()}},r.a.createElement("i",{className:"icon-trash-empty"}),r.a.createElement(G.Translate,{value:"clear"}))),r.a.createElement(fe,null),e.options.uploadDialog?r.a.createElement(re,{title:Object(G.t)("open"),onClose:function(){return e.setOption({uploadDialog:!1})}},r.a.createElement(X,e)):null,e.options.helpDialog?r.a.createElement(re,{title:Object(G.t)("help"),onClose:function(){return e.setOption({helpDialog:!1})}},r.a.createElement(K,e)):null,e.options.donateDialog?r.a.createElement(re,{title:Object(G.t)("donate"),onClose:function(){return e.setOption({donateDialog:!1})}},r.a.createElement(te,e)):null)}),he=n(21),ve=n(138),xe=n.n(ve);function we(){var e=Object(d.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 120%;\n    width: 100%;\n    padding: 20px;\n    background-color: rgba(0, 0, 0, 0.5);\n"]);return we=function(){return e},e}var ye=f.b.div(we()),Oe=r.a.memo((function(e){var t,n=e.options,a=e.setPlayer,i=e.setCurrentTime;return r.a.createElement(ye,null,r.a.createElement(xe.a,{style:{width:"100%",height:"100%"},option:(t={url:n.videoUrl,loop:!0,autoSize:!1,aspectRatio:!0,playbackRate:!0,fullscreen:!0,fullscreenWeb:!0,miniProgressBar:!0,subtitle:{url:n.subtitleUrl},moreVideoAttr:{crossOrigin:"anonymous",preload:"auto"},muted:!1,autoplay:!1},Object(he.a)(t,"autoSize",!0),Object(he.a)(t,"setting",!0),Object(he.a)(t,"loop",!0),Object(he.a)(t,"playbackRate",!0),Object(he.a)(t,"aspectRatio",!0),Object(he.a)(t,"fullscreen",!0),Object(he.a)(t,"fullscreenWeb",!0),Object(he.a)(t,"mutex",!0),t),getInstance:function(e){a(e),function t(){window.requestAnimationFrame((function(){e.playing&&i(e.currentTime),t()}))}(),e.on("seek",(function(){i(e.currentTime)}))}}))}),(function(){return!0}));function je(){var e=Object(d.a)(["\n    flex: 1;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    font-size: 13px;\n\n    .item {\n        display: flex;\n        align-items: center;\n        padding: 5px 10px;\n        border-bottom: 1px solid rgba(0, 0, 0, 0.4);\n\n        .value {\n            display: flex;\n            align-items: center;\n            select {\n                outline: none;\n                margin-left: 15px;\n            }\n            button {\n                height: 25px;\n                border: none;\n                padding: 0 10px;\n                margin-left: 15px;\n                outline: none;\n                cursor: pointer;\n                font-size: 12px;\n                color: #fff;\n                border-radius: 3px;\n                background-color: rgb(26, 83, 109);\n                transition: all 0.2s ease;\n                &:hover {\n                    color: #fff;\n                    background-color: #2196f3;\n                }\n                i {\n                    margin-right: 5px;\n                }\n            }\n        }\n    }\n"]);return je=function(){return e},e}var ke=f.b.div(je()),Ee=function(e){e.language,e.options,e.setOption,e.translateSubtitles,e.timeOffsetSubtitles;return r.a.createElement(ke,null,r.a.createElement("div",{className:"item"}))},Te=n(146),Ce=n(143),Se=n.n(Ce),Ne=n(102),ze=n.n(Ne);function De(){var e=Object(d.a)(["\n    .ReactVirtualized__Table {\n        font-size: 12px;\n        .ReactVirtualized__Table__Grid {\n            outline: none;\n        }\n        .ReactVirtualized__Table__row {\n            transition: all 0.2s ease;\n            &.odd {\n                background-color: rgb(35, 40, 64);\n            }\n            &.highlight {\n                background-color: #2196f3;\n            }\n            &.illegal {\n                background-color: #c75123;\n            }\n            .row {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                flex-direction: column;\n                color: #fff;\n                height: 100%;\n                padding: 10px 5px;\n                border-bottom: 1px solid #000;\n            }\n        }\n\n        .input,\n        .textarea {\n            border: none;\n            width: 100%;\n            color: #fff;\n            font-size: 12px;\n            text-align: center;\n            background-color: rgba(0, 0, 0, 0.4);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            resize: none;\n            outline: none;\n        }\n        .textarea1 {\n            border: none;\n            width: 100%;\n            color: #fff;\n            font-size: 12px;\n            text-align: center;\n            background-color: rgba(0, 0, 0, 0.1);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            resize: none;\n            outline: none;\n        }\n\n        .input {\n            height: 25px;\n            line-height: 25px;\n            cursor: col-resize;\n            user-select: none;\n        }\n\n        .textarea {\n            padding: 5px;\n            height: 100%;\n            line-height: 1.5;\n        }\n        .textarea1 {\n            padding: 5px;\n            height: 100%;\n            line-height: 1.5;\n        }\n\n        .operation {\n            i {\n                font-size: 12px;\n                cursor: pointer;\n            }\n        }\n    }\n"]);return De=function(){return e},e}var Pe=f.b.div(De()),Ue=function(e){var t=e.player,n=(e.choosestop,e.subtitles),i=(e.addSubtitle,e.currentIndex),o=e.updateSubtitle,l=(e.removeSubtitle,e.translateSubtitle,e.checkSubtitle),c=!1,s=0,u=null,d="",f="";function m(e,t,n){c=!0,s=e.pageX,u=t,d=n}function b(e,t,n){if(c){var a=Number(((e.pageX-s)/10).toFixed(3));f=E(D()(T(t[n])+a,0,1/0))}}function g(){c&&(u&&d&&f&&o(u,d,f),c=!1,s=0,u=null,d="",f="")}var h=Object(a.useState)(100),v=Object(p.a)(h,2),x=v[0],w=v[1],y=Object(a.useState)(100),O=Object(p.a)(y,2),j=O[0],k=O[1],C=Object(a.useCallback)((function(){w(document.body.clientWidth/2),k(document.body.clientHeight)}),[w,k]);return Object(a.useEffect)((function(){if(C(),!C.init){C.init=!0;var e=Se()(C,500);window.addEventListener("resize",e)}}),[C]),r.a.createElement(Pe,null,r.a.createElement(Te.a,{headerHeight:40,width:x,height:j,rowHeight:80,scrollToIndex:i,rowCount:n.length,rowGetter:function(e){var t=e.index;return n[t]},headerRowRenderer:function(){return null},rowRenderer:function(e){return r.a.createElement("div",{key:e.key,className:[e.className,e.index%2?"odd":"",i===e.index?"highlight":"",l(e.rowData)?"illegal":""].join(" ").trim(),style:e.style,onClick:function(){t.duration>=e.rowData.startTime&&(t.seek=e.rowData.startTime+.001)}},r.a.createElement("div",{className:"row time",style:{width:150},onMouseUp:g},r.a.createElement("div",{className:"input",onMouseDown:function(t){return m(t,e.rowData,"start")},onMouseMove:function(t){return b(t,e.rowData,"start")},style:{marginBottom:10}},e.rowData.start),r.a.createElement("div",{className:"input",onMouseDown:function(t){return m(t,e.rowData,"end")},onMouseMove:function(t){return b(t,e.rowData,"end")}},e.rowData.end)),r.a.createElement("div",{className:"row duration",style:{width:70}},e.rowData.duration),r.a.createElement("div",{className:"row text",style:{flex:1}},r.a.createElement("textarea",{maxLength:200,spellCheck:!1,className:"textarea1",value:ze()(e.rowData.text),onChange:function(t){return o(e.rowData,"text",t.target.value)}})),r.a.createElement("div",{className:"row text",style:{flex:1}},r.a.createElement("textarea",{maxLength:200,spellCheck:!1,className:"textarea",value:ze()(e.rowData.text),onChange:function(t){return o(e.rowData,"text",t.target.value)}})))}}))};function Le(){var e=Object(d.a)(["\n    display: flex;\n    height: 100%;\n    flex: 1;\n"]);return Le=function(){return e},e}function Re(){var e=Object(d.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    width: 50%;\n    border-right: 1px solid #000;\n"]);return Re=function(){return e},e}function Ie(){var e=Object(d.a)(["\n    position: relative;\n    display: flex;\n    justify-content: space-between;\n    flex: 1;\n    border-bottom: 1px solid #000;\n"]);return Ie=function(){return e},e}var Be=f.b.div(Ie()),Me=f.b.div(Re()),We=f.b.div(Le()),$e=function(e){return r.a.createElement(Be,null,r.a.createElement(Me,null,r.a.createElement(Oe,e),r.a.createElement(Ee,e)),r.a.createElement(We,null,r.a.createElement(Ue,e)))},_e=function(){function e(){Object(S.a)(this,e),this.name="subplayer_settings"}return Object(N.a)(e,[{key:"get",value:function(e){var t=JSON.parse(window.localStorage.getItem(this.name))||{};return e?t[e]:t}},{key:"set",value:function(e,t){var n=Object.assign({},this.get(),Object(he.a)({},e,t));window.localStorage.setItem(this.name,JSON.stringify(n))}},{key:"del",value:function(e){var t=this.get();delete t[e],window.localStorage.setItem(this.name,JSON.stringify(t))}},{key:"clean",value:function(){window.localStorage.removeItem(this.name)}}]),e}(),Ae=n(144),Fe=n.n(Ae),He=n(145),Ve=n.n(He);function Ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(!e.trim())return Promise.resolve("");var n=new URL("https://translate.googleapis.com/translate_a/single");return n.searchParams.append("client","gtx"),n.searchParams.append("sl","auto"),n.searchParams.append("dt","t"),n.searchParams.append("tl",t),n.searchParams.append("q",e),new Promise((function(e){k().then(Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch(n.href).then((function(e){return e.json()})).then((function(t){e(t?t[0].map((function(e){return e[0].trim()})).join("\n"):"")})).catch((function(t){C(t.message,"error"),e("")}));case 1:case"end":return t.stop()}}),t)}))))}))}function Je(e,t){return qe.apply(this,arguments)}function qe(){return(qe=Object(s.a)(c.a.mark((function e(t,n){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.a.start(),a=Ve()(1),r=0,e.prev=3,e.next=6,Promise.all(t.map((function(e){return a(Object(s.a)(c.a.mark((function a(){var i;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ge(e.text,n);case 2:return i=a.sent,x.a.set(++r/t.length),i&&(e.text=i),a.abrupt("return",e);case 6:case"end":return a.stop()}}),a)}))))})));case 6:return i=e.sent,x.a.done(),e.abrupt("return",i);case 11:e.prev=11,e.t0=e.catch(3),x.a.done(),C(e.t0.message,"error");case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}var Xe=[],Ye=!1,Ze=new _e,Ke=new Worker(URL.createObjectURL(new Blob(["onmessage = event => {\n                postMessage(URL.createObjectURL(\n                    new Blob([\n                        `WEBVTT\n\n                        ${event.data.map((item, index) => `\n                        ${index + 1}\n                        ${item.start} --\x3e ${item.end}\n                        ${item.text}`).join('\\n\\n')}\n                        `\n                    ], {\n                        type: 'text/vtt',\n                    }),\n                ))\n            }"]))),Qe=function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=t[0],i=t[1],o=Ze.get("language")||navigator.language.toLowerCase()||"en",l=Object(a.useState)(o),d=Object(p.a)(l,2),f=d[0],m=d[1],g=Object(a.useState)(-1),h=Object(p.a)(g,2),v=h[0],w=h[1],y=Object(a.useState)(0),O=Object(p.a)(y,2),j=O[0],k=O[1],T=Object(a.useState)([]),S=Object(p.a)(T,2),N=S[0],z=S[1],U=Object(a.useState)([]),L=Object(p.a)(U,2),R=L[0],I=L[1],B=Object(a.useState)({videoUrl:"/sample.mp4",subtitleUrl:"/sample.vtt",choosestop:!1,helpDialog:!1,donateDialog:!1,uploadDialog:!1,translationLanguage:"en"}),M=Object(p.a)(B,2),W=M[0],$=M[1],_=Object(a.useCallback)((function(e){Object(G.setLocale)(e),m(e),Ze.set("language",e)}),[m]),A=Object(a.useCallback)((function(e){$(Object(u.a)(Object(u.a)({},W),e))}),[W,$]),F=Object(a.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.length&&!Fe()(e,N)&&(z(e),t&&(Xe.length>=100&&Xe.shift(),Xe.push(e.map((function(e){return e.clone})))),Ze.set("subtitles",e),Ke.postMessage(e))}),[z,N]),V=Object(a.useCallback)(Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Ze.get("subtitles"))||!t.length){e.next=5;break}F(t.map((function(e){return new P(e.start,e.end,e.text)}))),e.next=9;break;case 5:return e.next=7,H(W.subtitleUrl);case 7:n=e.sent,F(n);case 9:case"end":return e.stop()}}),e)}))),[W.subtitleUrl,z]);Object(a.useCallback)(Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(W.subtitleUrl);case 2:t=e.sent,F(t);case 4:case"end":return e.stop()}}),e)}))),[W.subtitleUrl,I]);Object(a.useEffect)((function(){V(),_(f),n&&!Ke.onmessage&&(Ke.onmessage=function(e){n.subtitle.switch(e.data)})}),[n]),Object(a.useMemo)((function(){w(N.findIndex((function(e){return e.startTime<=j&&e.endTime>j})))}),[N,j,w]);var J=Object(a.useCallback)((function(e){return N.indexOf(e)}),[N]),q=Object(a.useCallback)((function(){return N.map((function(e){return e.clone}))}),[N]),X=Object(a.useCallback)((function(e){var t=J(e);if(!(t<0)){var n=N[t-1];return n&&e.startTime<n.endTime||!e.check}}),[J,N]),Y=Object(a.useCallback)((function(e,t,n){var a=J(e);if(!(a<0)){var r=q(),i=e.clone;"object"===typeof t?Object.assign(i,t):i[t]=n,i.check?(r[a]=i,F(r)):C(Object(G.t)("parameter-error"),"error")}}),[J,q,F]),Z=Object(a.useCallback)((function(e){var t=J(e);if(!(t<0)){var n=q();if(1===n.length)return C(Object(G.t)("keep-one"),"error");n.splice(t,1),F(n)}}),[J,q,F]),K=Object(a.useCallback)((function(e,t){var n=q();if(t)n.splice(e,0,t);else{var a=n[e-1],r=a?E(a.endTime+.1):"00:00:00.001",i=a?E(a.endTime+1.1):"00:00:01.001",o=new P(r,i,Object(G.t)("subtitle-text"));n.splice(e,0,o)}F(n)}),[q,F]),Q=Object(a.useCallback)((function(e){var t=J(e);if(!(t<0)){var n=q(),a=n[t+1];if(J(a)){var r=new P(e.start,a.end,e.text+"\n"+a.text);n[t]=r,n.splice(t+1,1),F(n)}}}),[J,q,F]),ee=Object(a.useCallback)((function(){F([new P("00:00:00.000","00:00:01.000",Object(G.t)("subtitle-text"))])}),[F]),te=Object(a.useCallback)((function(){if(Xe.length>1){Xe.pop();var e=Xe[Xe.length-1];F(e,!1),C(Object(G.t)("history-rollback"))}else C(Object(G.t)("history-empty"),"error")}),[F]),ne=Object(a.useCallback)((function(e){var t=q();F(t.map((function(t){return t.start=E(D()(t.startTime+e,0,1/0)),t.end=E(D()(t.endTime+e,0,1/0)),t}))),C("".concat(Object(G.t)("time-offset")," ").concat(1e3*e,"ms"))}),[q,F]),ae=Object(a.useCallback)((function(){Xe.length=0,Ze.set("subtitles",[]),ee(),n.seek=0,C(Object(G.t)("clear-success"))}),[n,ee]),re=Object(a.useCallback)(function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ye){e.next=22;break}if(!(J(t)<0)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,Ye=!0,x.a.start().set(.5),e.next=9,Ge(t.text,W.translationLanguage);case 9:(n=e.sent)&&(Y(t,"text",n),C(Object(G.t)("translation-success"))),Ye=!1,x.a.done(),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(4),C(e.t0.message,"error"),Ye=!1,x.a.done();case 20:e.next=23;break;case 22:C(Object(G.t)("translation-progress"),"error");case 23:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),[J,Y,W.translationLanguage]),ie=Object(a.useCallback)(Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ye){e.next=23;break}if(!((t=q()).length&&t.length<=1e3)){e.next=20;break}return Ye=!0,e.prev=4,e.t0=F,e.next=8,Je(t,W.translationLanguage);case 8:e.t1=e.sent,(0,e.t0)(e.t1),C(Object(G.t)("translation-success")),Ye=!1,e.next=18;break;case 14:e.prev=14,e.t2=e.catch(4),C(e.t2.message,"error"),Ye=!1;case 18:e.next=21;break;case 20:C(Object(G.t)("translation-limit"),"error");case 21:e.next=24;break;case 23:C(Object(G.t)("translation-progress"),"error");case 24:case"end":return e.stop()}}),e,null,[[4,14]])}))),[q,F,W.translationLanguage]),oe={player:n,options:W,language:f,subtitles:N,currentTime:j,currentIndex:v,refe_subtitles:R,setOption:A,setPlayer:i,setCurrentTime:k,setCurrentIndex:w,updateLang:_,hasSubtitle:J,addSubtitle:K,checkSubtitle:X,undoSubtitles:te,mergeSubtitle:Q,removeSubtitle:Z,updateSubtitle:Y,cleanSubtitles:ae,updateSubtitles:F,removeSubtitles:ee,translateSubtitle:re,translateSubtitles:ie,timeOffsetSubtitles:ne};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement(ge,oe),r.a.createElement($e,oe))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(297),n(298),n(299),n(300),n(301);Object(G.setTranslations)(h),x.a.configure({minimum:0,showSpinner:!1}),o.a.render(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)?"SubPlayer does not support mobile access":r.a.createElement(Qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[147,1,2]]]);
//# sourceMappingURL=main.c36b2bd1.chunk.js.map